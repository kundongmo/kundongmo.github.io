{"meta":{"title":"è«å¤ä¸œçš„åšå®¢","subtitle":null,"description":null,"author":"å°ç™½","url":"https://mokundong.cn"},"pages":[{"title":"","date":"2019-10-31T12:50:43.996Z","updated":"2019-02-21T11:34:20.574Z","comments":true,"path":"googlea31bfe60691413ce.html","permalink":"https://mokundong.cn/googlea31bfe60691413ce.html","excerpt":"","text":"google-site-verification: googlea31bfe60691413ce.html"},{"title":"about","date":"2018-12-12T14:14:36.000Z","updated":"2019-10-25T08:38:51.697Z","comments":true,"path":"about/index.html","permalink":"https://mokundong.cn/about/index.html","excerpt":"","text":"ç®€å†é¡¹ç›®","keywords":"å…³äº"},{"title":"bangumi","date":"2019-02-10T13:32:48.000Z","updated":"2019-10-15T15:10:33.000Z","comments":false,"path":"bangumi/index.html","permalink":"https://mokundong.cn/bangumi/index.html","excerpt":"","text":"","keywords":null},{"title":"client","date":"2018-12-20T15:13:35.000Z","updated":"2019-10-15T15:10:33.000Z","comments":false,"path":"client/index.html","permalink":"https://mokundong.cn/client/index.html","excerpt":"","text":"ç›´æ¥ä¸‹è½½ or æ‰«ç ä¸‹è½½ï¼š","keywords":"Androidå®¢æˆ·ç«¯"},{"title":"categories","date":"2019-01-13T04:38:07.000Z","updated":"2019-02-21T11:34:20.956Z","comments":true,"path":"categories/index.html","permalink":"https://mokundong.cn/categories/index.html","excerpt":"","text":""},{"title":"comment","date":"2018-12-20T15:13:48.000Z","updated":"2019-10-15T15:10:33.000Z","comments":true,"path":"comment/index.html","permalink":"https://mokundong.cn/comment/index.html","excerpt":"","text":"å¿µä¸¤å¥è¯— å™åˆ«æ¢¦ã€æ‰¬å·ä¸€è§‰ã€‚ ã€å®‹ä»£ã€‘å´æ–‡è‹±ã€Šå¤œæ¸¸å®«Â·äººå»è¥¿æ¥¼é›æ³ã€‹","keywords":"ç•™è¨€æ¿"},{"title":"donate","date":"2018-12-20T15:13:05.000Z","updated":"2019-10-15T15:10:33.000Z","comments":false,"path":"donate/index.html","permalink":"https://mokundong.cn/donate/index.html","excerpt":"","text":"","keywords":"è°¢è°¢é¥²ä¸»äº†å–µ~"},{"title":"lab","date":"2019-01-05T13:47:59.000Z","updated":"2019-10-15T15:10:33.000Z","comments":false,"path":"lab/index.html","permalink":"https://mokundong.cn/lab/index.html","excerpt":"","text":"sakuraä¸»é¢˜balabala","keywords":"Labå®éªŒå®¤"},{"title":"links","date":"2018-12-19T15:11:06.000Z","updated":"2019-10-15T15:10:33.000Z","comments":true,"path":"links/index.html","permalink":"https://mokundong.cn/links/index.html","excerpt":"","text":"","keywords":"å‹äººå¸"},{"title":"music","date":"2018-12-20T15:14:28.000Z","updated":"2019-10-15T15:10:33.000Z","comments":false,"path":"music/index.html","permalink":"https://mokundong.cn/music/index.html","excerpt":"","text":"","keywords":"å–œæ¬¢çš„éŸ³ä¹"},{"title":"rss","date":"2018-12-20T15:09:03.000Z","updated":"2019-10-15T15:10:33.000Z","comments":true,"path":"rss/index.html","permalink":"https://mokundong.cn/rss/index.html","excerpt":"","text":""},{"title":"tags","date":"2018-12-12T14:14:16.000Z","updated":"2019-10-15T15:10:33.000Z","comments":true,"path":"tags/index.html","permalink":"https://mokundong.cn/tags/index.html","excerpt":"","text":""},{"title":"theme-sakura","date":"2019-01-04T14:53:25.000Z","updated":"2019-10-15T15:10:33.000Z","comments":false,"path":"theme-sakura/index.html","permalink":"https://mokundong.cn/theme-sakura/index.html","excerpt":"","text":"Hexoä¸»é¢˜Sakuraä¿®æ”¹è‡ªWordPressä¸»é¢˜Sakuraï¼Œæ„Ÿè°¢åŸä½œè€…Mashiro","keywords":"Hexo ä¸»é¢˜ Sakura ğŸŒ¸"},{"title":"video","date":"2018-12-20T15:14:38.000Z","updated":"2019-10-15T15:10:33.000Z","comments":false,"path":"video/index.html","permalink":"https://mokundong.cn/video/index.html","excerpt":"","text":"var videos = [ { img: 'https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg', title: 'æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ±', status: 'å·²è¿½å®Œ', progress: 100, jp: 'ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã†', time: 'æ”¾é€æ—¶é—´: 2018-02-24 SUN.', desc: ' ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚' }, { img : 'https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg', title: 'æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ±', status: 'å·²è¿½å®Œ', progress: 100, jp: 'ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã†', time: '2018-02-24 SUN.', desc: ' ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚' } ] .should-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:95%;}.should-ellipsis-full{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;}.should-ellipsis i{position:absolute;right:24px;}.grey-text{color:#9e9e9e !important}.grey-text.text-darken-4{color:#212121 !important}html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}img{border-style:none}progress{display:inline-block;vertical-align:baseline}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{-webkit-box-sizing:border-box;box-sizing:border-box}*,*:before,*:after{-webkit-box-sizing:inherit;box-sizing:inherit}ul:not(.browser-default){padding-left:0;list-style-type:none}ul:not(.browser-default)>li{list-style-type:none}.card{-webkit-box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2);box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2)}.hoverable{-webkit-transition:-webkit-box-shadow .25s;transition:-webkit-box-shadow .25s;transition:box-shadow .25s;transition:box-shadow .25s,-webkit-box-shadow .25s}.hoverable:hover{-webkit-box-shadow:0 8px 17px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);box-shadow:0 8px 17px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)}i{line-height:inherit}i.right{float:right;margin-left:15px}.bangumi .right{float:right !important}.material-icons{text-rendering:optimizeLegibility;-webkit-font-feature-settings:'liga';-moz-font-feature-settings:'liga';font-feature-settings:'liga'}.row{margin-left:auto;margin-right:auto;margin-bottom:20px}.row:after{content:\"\";display:table;clear:both}.row .col{float:left;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 .75rem;min-height:1px}.row .col.s12{width:100%;margin-left:auto;left:auto;right:auto}@media only screen and (min-width:601px){.row .col.m6{width:50%;margin-left:auto;left:auto;right:auto}}html{line-height:1.5;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Oxygen-Sans,Ubuntu,Cantarell,\"Helvetica Neue\",sans-serif;font-weight:normal;color:rgba(0,0,0,0.87)}@media only screen and (min-width:0){html{font-size:14px}}@media only screen and (min-width:992px){html{font-size:14.5px}}@media only screen and (min-width:1200px){html{font-size:15px}}.card{position:relative;margin:.5rem 0 1rem 0;background-color:#fff;-webkit-transition:-webkit-box-shadow .25s;transition:-webkit-box-shadow .25s;transition:box-shadow .25s;transition:box-shadow .25s,-webkit-box-shadow .25s;border-radius:2px}.card .card-title{font-size:24px;font-weight:300}.card .card-title.activator{cursor:pointer}.card .card-image{position:relative}.card .card-image img{display:block;border-radius:2px 2px 0 0;position:relative;left:0;right:0;top:0;bottom:0;width:100%}.card .card-content{padding:24px;border-radius:0 0 2px 2px}.card .card-content p{margin:0}.card .card-content .card-title{display:block;line-height:32px;margin-bottom:8px}.card .card-content .card-title i{line-height:32px}.card .card-reveal{padding:24px;position:absolute;background-color:#fff;width:100%;overflow-y:auto;left:0;top:100%;height:100%;z-index:3;display:none}.card .card-reveal .card-title{cursor:pointer;display:block}.waves-effect{position:relative;cursor:pointer;display:inline-block;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;vertical-align:middle;z-index:1;-webkit-transition:.3s ease-out;transition:.3s ease-out}.waves-effect img{position:relative;z-index:-1}.waves-block{display:block}::-webkit-input-placeholder{color:#d1d1d1}::-moz-placeholder{color:#d1d1d1}:-ms-input-placeholder{color:#d1d1d1}::-ms-input-placeholder{color:#d1d1d1}[type=\"radio\"]:not(:checked){position:absolute;opacity:0;pointer-events:none}[type=\"radio\"]:not(:checked)+span{position:relative;padding-left:35px;cursor:pointer;display:inline-block;height:25px;line-height:25px;font-size:1rem;-webkit-transition:.28s ease;transition:.28s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[type=\"radio\"]:not(:checked)+span:before,[type=\"radio\"]:not(:checked)+span:after{border-radius:50%}[type=\"radio\"]:not(:checked)+span:before,[type=\"radio\"]:not(:checked)+span:after{border:2px solid #5a5a5a}[type=\"radio\"]:not(:checked)+span:after{-webkit-transform:scale(0);transform:scale(0)}[type=\"checkbox\"]:not(:checked){position:absolute;opacity:0;pointer-events:none}[type=\"checkbox\"]:not(:checked):disabled+span:not(.lever):before{border:none;background-color:rgba(0,0,0,0.42)}[type=\"checkbox\"].filled-in:not(:checked)+span:not(.lever):before{width:0;height:0;border:3px solid transparent;left:6px;top:10px;-webkit-transform:rotateZ(37deg);transform:rotateZ(37deg);-webkit-transform-origin:100% 100%;transform-origin:100% 100%}[type=\"checkbox\"].filled-in:not(:checked)+span:not(.lever):after{height:20px;width:20px;background-color:transparent;border:2px solid #5a5a5a;top:0px;z-index:0}input[type=checkbox]:not(:disabled) ~ .lever:active:before,input[type=checkbox]:not(:disabled).tabbed:focus ~ .lever::before{-webkit-transform:scale(2.4);transform:scale(2.4);background-color:rgba(0,0,0,0.08)}input[type=range].focused:focus:not(.active)::-webkit-slider-thumb{-webkit-box-shadow:0 0 0 10px rgba(38,166,154,0.26);box-shadow:0 0 0 10px rgba(38,166,154,0.26)}input[type=range].focused:focus:not(.active)::-moz-range-thumb{box-shadow:0 0 0 10px rgba(38,166,154,0.26)}input[type=range].focused:focus:not(.active)::-ms-thumb{box-shadow:0 0 0 10px rgba(38,166,154,0.26)} ç•ªç»„è®¡åˆ’ è¿™é‡Œå°†æ˜¯æ°¸è¿œçš„å›å¿† window.onload = function(){ videos.forEach(function(video, i){ $('#rootRow').append(` ${video.title} ${video.jp} ${video.status} ${video.title} ${video.jp} æ”¾é€æ—¶é—´: ${video.time} ${video.desc} ${video.status} `) }) }","keywords":"Bç«™"}],"posts":[{"title":"ç‰¹å¾åŠ æƒä¹‹TFIWF","slug":"nlp-basic-keyword-tfiwf","date":"2019-10-31T13:01:33.000Z","updated":"2019-11-01T05:39:37.605Z","comments":true,"path":"nlp-basic-keyword-tfiwf/","link":"","permalink":"https://mokundong.cn/nlp-basic-keyword-tfiwf/","excerpt":"","text":"1ã€èƒŒæ™¯åœ¨ä¸Šç¯‡ç‰¹å¾åŠ æƒä¹‹TFIDF ä¸­ï¼Œæˆ‘ä»¬æåˆ°äº†IDFçš„å›ºæœ‰ç¼ºç‚¹ï¼Œå³$IDF$ çš„ç®€å•ç»“æ„å¹¶ä¸èƒ½ä½¿æå–çš„å…³é”®è¯ï¼Œååˆ†æœ‰æ•ˆåœ°åæ˜ å•è¯çš„é‡è¦ç¨‹åº¦å’Œç‰¹å¾è¯çš„åˆ†å¸ƒæƒ…å†µï¼Œä½¿å…¶æ— æ³•å¾ˆå¥½åœ°å®Œæˆå¯¹æƒå€¼è°ƒæ•´çš„åŠŸèƒ½ã€‚å°¤å…¶æ˜¯åœ¨åŒç±»è¯­æ–™åº“ä¸­ï¼Œè¿™ä¸€æ–¹æ³•æœ‰å¾ˆå¤§å¼Šç«¯ï¼Œå¾€å¾€ä¸€äº›åŒç±»æ–‡æœ¬çš„å…³é”®è¯è¢«æ©ç›–ã€‚ä¾‹å¦‚ï¼šè¯­æ–™åº“ $D$ ä¸­æ•™è‚²ç±»æ–‡ç« åå¤šï¼Œè€Œæ–‡æœ¬ $j $æ˜¯ä¸€ç¯‡å±äºæ•™è‚²ç±»çš„æ–‡ç« ï¼Œé‚£ä¹ˆæ•™è‚²ç±»ç›¸å…³çš„è¯è¯­çš„$ IDF $å€¼å°†ä¼šåå°ï¼Œä½¿æå–æ–‡æœ¬å…³é”®è¯çš„å¬å›ç‡æ›´ä½ã€‚å› æ­¤æˆ‘ä»¬åœ¨æ­¤æå‡ºè¯è¯­é€†é¢‘ç‡æ–¹å¼è®¡ç®—åŠ æƒç®—æ³• $TF-IWF$ (Term Frequency-Inverse Word Frequency)ã€‚ 2ã€TF-IWFæ­¤å¤„çš„$TF$ä¸$TF-IDF$ä¸­æ„ä¹‰ä¸€æ ·ï¼Œè¡¨ç¤ºè¯é¢‘ï¼š$$tf_{ij} = \\frac{n_{i,j}}{\\sum_{k}n_{k,j}}$$ä¸Šå¼ä¸­åˆ†å­$ n_{i,j}$ è¡¨ç¤ºè¯è¯­$t_i$åœ¨æ–‡æœ¬$j$ä¸­çš„é¢‘æ•°ï¼Œåˆ†æ¯$\\sum_{k}n_{k,j}$è¡¨ç¤ºæ–‡æ¡£$j$ä¸­æ‰€æœ‰è¯æ±‡é‡æ€»å’Œï¼Œå³æ˜¯è¯´ï¼š $$TF_w = \\frac{ç»™å®šè¯wåœ¨å½“å‰æ–‡ç« å‡ºç°çš„æ¬¡æ•°}{å½“å‰æ–‡ç« ä¸­çš„æ€»è¯é‡}$$ä¸åŒä¹‹å¤„åœ¨äº$IWF$éƒ¨åˆ†ï¼Œå®šä¹‰ä¸ºï¼š$$iwf_{i} = log\\frac{\\sum_{i=1}^m nt_{i}}{nt_{i}}$$ä¸Šå¼ä¸­åˆ†å­ $\\sum_{i=1}^m nt_{i}$ è¡¨ç¤ºè¯­æ–™åº“ä¸­æ‰€æœ‰è¯è¯­çš„é¢‘æ•°ä¹‹å’Œï¼Œåˆ†æ¯ $nt_{i}$ è¡¨ç¤ºè¯è¯­ $t_{i}$ åœ¨è¯­æ–™åº“ä¸­çš„æ€»é¢‘æ•°ï¼Œå³ï¼š$$IWF_{i}=\\frac{è¯­æ–™åº“ä¸­æ‰€æœ‰è¯è¯­çš„é¢‘æ•°}{ç»™å®šè¯wåœ¨è¯­æ–™åº“ä¸­å‡ºç°çš„é¢‘æ•°å’Œ}$$ å› æ­¤ï¼Œ$TF-IWF$ å®šä¹‰ä¸ºï¼š$$TF-IWF_{i,j}\\rightarrow tf_{i,j} \\times iwf_{i}=\\frac{n_{i,j}}{\\sum_{k}n_{k,j}}\\times log\\frac{\\sum_{i=1}^m nt_{i}}{nt_{i}}$$ 3ã€ä»£ç å®ç°4ã€æ€»ç»“è¿™ç§åŠ æƒæ–¹æ³•é™ä½äº†è¯­æ–™åº“ä¸­åŒç±»å‹æ–‡æœ¬å¯¹è¯è¯­æƒé‡çš„å½±å“ï¼Œæ›´åŠ ç²¾ç¡®åœ°è¡¨è¾¾äº†è¿™ä¸ªè¯è¯­åœ¨å¾… æŸ¥æ–‡æ¡£ä¸­çš„é‡è¦ç¨‹åº¦ã€‚åœ¨ä¼ ç»Ÿæ–¹æ³• $TF-IDF$ æ‰€æ±‚çš„æƒå€¼ä¸€èˆ¬å¾ˆå°æ¥è¿‘ $0$ï¼Œç²¾ç¡®åº¦ä¹Ÿä¸æ˜¯å¾ˆé«˜ï¼Œå…¬å¼ $TF-IWF$ çš„è®¡ç®—ç»“æœåˆšå¥½èƒ½è§£å†³æœ€åæƒå€¼è¿‡å°çš„é—®é¢˜ã€‚","categories":[{"name":"nlp","slug":"nlp","permalink":"https://mokundong.cn/categories/nlp/"},{"name":"ä¸»é¢˜æŠ½å–","slug":"nlp/ä¸»é¢˜æŠ½å–","permalink":"https://mokundong.cn/categories/nlp/ä¸»é¢˜æŠ½å–/"}],"tags":[],"keywords":[{"name":"nlp","slug":"nlp","permalink":"https://mokundong.cn/categories/nlp/"},{"name":"ä¸»é¢˜æŠ½å–","slug":"nlp/ä¸»é¢˜æŠ½å–","permalink":"https://mokundong.cn/categories/nlp/ä¸»é¢˜æŠ½å–/"}]},{"title":"ç‰¹å¾åŠ æƒä¹‹TFIDF","slug":"nlp-basic-keyword-tfidf","date":"2019-10-31T03:44:27.000Z","updated":"2019-11-01T03:10:50.800Z","comments":true,"path":"nlp-basic-keyword-tfidf/","link":"","permalink":"https://mokundong.cn/nlp-basic-keyword-tfidf/","excerpt":"","text":"1ã€èƒŒæ™¯TF-IDFæ˜¯ä¿¡æ¯æ£€ç´¢å’Œæ–‡æœ¬æŒ–æ˜ä¸­å¸¸ç”¨çš„ç‰¹å¾åŠ æƒæŠ€æœ¯ï¼ŒåŒæ ·å¸¸ç”¨äºæ–‡æœ¬ä¸»é¢˜æå–å’Œåˆ†è¯åŠ æƒç­‰åœºæ™¯ã€‚ TF-IDFæ˜¯ä¸€ç§å®Œå…¨åŸºäºç»Ÿè®¡çš„æ–¹æ³•ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯å‡è®¾å­—è¯çš„é‡è¦æ€§ä¸å…¶åœ¨æŸç¯‡æ–‡ç« ä¸­å‡ºç°çš„æ¯”ä¾‹æˆæ­£æ¯”ï¼Œä¸å…¶åœ¨å…¶ä»–æ–‡ç« ä¸­å‡ºç°çš„æ¯”ä¾‹æˆåæ¯”ã€‚ 2ã€TF-IDFæ€ä¹ˆç†è§£å‘¢ï¼ŸæŸä¸ªè¯åœ¨ä¸€ç¯‡æ–‡ç« ä¸­åå¤å‡ºç°æœ‰ä¸¤ç§æƒ…å†µï¼Œå³è¿™ä¸ªè¯æ˜¯å…³é”®è¯æˆ–è€…å¸¸ç”¨è¯(å¯ç†è§£ä¸ºåœç”¨è¯)ã€‚è¦ç¡®å®šè¿™ä¸ªè¯çš„æœ€ç»ˆå±æ€§åˆ™éœ€è¦è€ƒè™‘è¿™ä¸ªè¯åœ¨å…¶ä»–æ–‡ç« ä¸­å‡ºç°çš„é¢‘ç‡ï¼Œè‹¥å…¶ä»–æ–‡ç« å‡ºç°é¢‘ç‡é«˜åˆ™å¯ä»¥åˆ¤æ–­ä¸ºå¸¸ç”¨è¯ï¼Œå‡ºç°é¢‘ç‡ä½åˆ™å¯ä»¥ç¡®å®šä¸ºè¯¥è¯æ‰€å±æ–‡ç« çš„ä¸»é¢˜è¯ã€‚ 2.1ã€TFTF (Trem Frequency) è¡¨ç¤ºè¯é¢‘ï¼Œå³ä¸€ä¸ªè¯åœ¨æ–‡ç« ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚å®é™…åº”ç”¨ä¸­ä¸åŒé•¿åº¦çš„æ–‡ç« ä¸­æŒ‡å®šè¯å‡ºç°çš„æ¬¡æ•°å¯èƒ½ä¸æ–‡æ¡£é•¿åº¦æœ‰æ­£ç›¸å…³ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¯¹è¯é¢‘è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œé€šå¸¸ç”¨æ¬¡æ•°é™¤ä»¥æ–‡ç« çš„æ€»è¯æ•°ï¼š$$tf_{ij} = \\frac{n_{i,j}}{\\sum_{k}n_{k,j}}$$å…¬å¼ä¸­åˆ†å­$ n_{i,j}$ è¡¨ç¤ºè¯è¯­$t_i$åœ¨æ–‡æœ¬$j$ä¸­çš„é¢‘æ•°ï¼Œåˆ†æ¯$\\sum_{k}n_{k,j}$è¡¨ç¤ºæ–‡æ¡£$j$ä¸­æ‰€æœ‰è¯æ±‡é‡æ€»å’Œã€‚ å³æ˜¯è¯´ï¼š$$TF_w = \\frac{ç»™å®šè¯wåœ¨å½“å‰æ–‡ç« å‡ºç°çš„æ¬¡æ•°}{å½“å‰æ–‡ç« ä¸­çš„æ€»è¯é‡}$$$TF$åœ¨åº”ç”¨ä¸­ä¸€èˆ¬æ˜¯åœ¨åˆ†è¯çš„æ—¶å€™åœ¨çº¿è®¡ç®—ã€‚ 2.2ã€IDFIDF(Inverse Document Frequency)è¡¨ç¤ºé€†æ–‡æ¡£ç‡ï¼Œå®šä¹‰ä¸ºæ–‡ä»¶æ€»æ•°é™¤ä»¥åŒ…å«ç»™å®šè¯å‡ºç°çš„æ–‡æ¡£æ•°ã€‚$$idf_{i} = log\\frac{\\left|D\\right|}{\\left|\\left\\{j:t_i\\in d_j\\right\\}\\right|}$$å…¬å¼ä¸­$\\left|D\\right|$è¡¨ç¤ºè¯­æ–™åº“$d$çš„æ–‡æ¡£æ€»æ•°ï¼Œåˆ†æ¯$\\left|\\left\\{j:t_i\\in d_j\\right\\}\\right|$è¡¨ç¤ºè¯­æ–™åº“$d$ä¸­åŒ…å«æ–‡æ¡£$j$ä¸­è¯è¯­$t_i$çš„æ–‡æ¡£æ•°ï¼Œå®é™…åº”ç”¨ä¸­ä¸ºäº†é¿å…åˆ†æ¯ä¸º$0$ï¼Œå› æ­¤åˆ†æ¯ä¸€èˆ¬é‡‡ç”¨$\\left|1 + \\left\\{j:t_i\\in d_j\\right\\}\\right|$ã€‚ å³æ˜¯è¯´ï¼š$$IDF=log \\frac{è¯­æ–™åº“æ–‡æ¡£æ€»æ•°}{åŒ…å«è¯wçš„æ–‡æ¡£æ•°}$$$IDF$åœ¨åº”ç”¨ä¸­ä¸€èˆ¬æ˜¯é‡‡ç”¨ä¸šåŠ¡ç›¸å…³è¯­æ–™ç¦»çº¿è®¡ç®—ã€‚ 2.3ã€TF-IDF$TF-IDF$å®šä¹‰ä¸ºï¼š$$TF-IDF_{i,j}\\rightarrow tf_{i,j} \\times idf_{i}=\\frac{n_{i,j}}{\\sum_{k}n_{k,j}}\\times log \\frac{\\left|D\\right|}{\\left|1+\\left\\{j:t_{i}\\in{d_{j}}\\right\\}\\right|}$$ä»¥ä¸Šå°±æ˜¯TF-IDFç®—æ³•çš„å…¨éƒ¨ç†è®ºã€‚ 2.4ã€å®ç°ç›®å‰å¾ˆå¤šåˆ†è¯æ¡†æ¶å’Œæœºå™¨å­¦ä¹ ç®—æ³•åŒ…å‡é›†æˆäº†TF-IDFç®—æ³•ï¼Œä»¥ä¸‹åšä¸€ä¸ªç®€è¦çš„ç½—åˆ—ï¼š 2.4.1ã€ç»“å·´åˆ†è¯(Python)123import jieba.analysestr = \"è‡ªç„¶è¯­è¨€æ˜¯äººç±»æ™ºæ…§çš„ç»“æ™¶ï¼Œè‡ªç„¶è¯­è¨€å¤„ç†æ˜¯äººå·¥æ™ºèƒ½ä¸­æœ€ä¸ºå›°éš¾çš„é—®é¢˜ä¹‹ä¸€ï¼Œè€Œå¯¹è‡ªç„¶è¯­è¨€å¤„ç†çš„ç ”ç©¶ä¹Ÿæ˜¯å……æ»¡é­…åŠ›å’ŒæŒ‘æˆ˜çš„ã€‚\"jieba.analyse.extract_tags(s, topK=10, withWeight=True, allowPOS=()) è¶Šæ˜¯é‡è¦çš„è¯è¯­æ‰€ç»™äºˆçš„æƒé‡å°±è¶Šå¤§ã€‚ 2.4.2ã€Scikit-learnScikit-learnæä¾›äº†è‡ªå·±è®­ç»ƒçš„æ¨¡å‹çš„æ¥å£ 12345678910111213141516171819202122232425#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/10/30 09:48# @Author : mokundongfrom sklearn.feature_extraction.text import CountVectorizerfrom sklearn.feature_extraction.text import TfidfTransformerx_train = ['è¿™æ˜¯ ç¬¬ä¸€ ç¯‡ æ–‡ç«  ï¼Œ', 'è¿™ ç¯‡ æ–‡ç«  æ˜¯ ç¬¬äºŒ ç¯‡ æ–‡ç«  ã€‚', 'è¿™æ˜¯ ç¬¬ä¸‰ ç¯‡ æ–‡ç«  ã€‚' ]x_test = ['è¿™æ˜¯ ç¬¬å‡  ç¯‡ æ–‡ç«  ï¼Ÿ']CV = CountVectorizer(max_features=10)transformer = TfidfTransformer()tf_idf = transformer.fit_transform(CV.fit_transform(x_train))x_train_weight = tf_idf.toarray()tf_idf = transformer.transform(CV.transform(x_test))x_test_weight = tf_idf.toarray()print(x_test_weight)'''output:[[0.61335554 0. 0. 0. 0.78980693]]''' 2.4.3ã€ç¬”è€…åœ¨é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬é‡‡å–çš„æ–¹æ³•æ˜¯ï¼šaã€é¦–å…ˆç”¨ç›¸å…³çš„æ–‡æœ¬è®­ç»ƒIDFå€¼ä¿å­˜æ–‡ä»¶ï¼› bã€åœ¨é¡¹ç›®ä¸­é¦–å…ˆåˆå§‹åŒ–æ–‡ä»¶åˆ°å†…å­˜ï¼Œä¿å­˜ä¸ºå­—å…¸ä¾¿äºå¿«é€ŸæŸ¥è¯¢ï¼› cã€æ–°æ–‡æ¡£è¯»å…¥åå®æ—¶è®¡ç®—TFå€¼å¹¶æŸ¥è¯¢ç›¸å…³IDFå€¼è®¡ç®—å‡ºTF-IDFå€¼ã€‚ 2.5 æ€»ç»“æœ¬è´¨ä¸Š$IDF$æ˜¯ä¸€ç§è¯•å›¾æŠ‘åˆ¶å™ªå£°çš„åŠ æƒï¼Œå•çº¯çš„ä»¥ä¸ºæ–‡æœ¬é¢‘ç‡å°çš„å•è¯å°±è¶Šé‡è¦ï¼Œæ–‡æœ¬é¢‘ç‡å¤§çš„å•è¯å°±è¶Šæ— ç”¨ã€‚è¿™å¯¹äºå¤§éƒ¨åˆ†æ–‡æœ¬ä¿¡æ¯ï¼Œå¹¶ä¸æ˜¯å®Œå…¨æ­£ç¡®çš„ã€‚$IDF$ çš„ç®€å•ç»“æ„å¹¶ä¸èƒ½ä½¿æå–çš„å…³é”®è¯ï¼Œååˆ†æœ‰æ•ˆåœ°åæ˜ å•è¯çš„é‡è¦ç¨‹åº¦å’Œç‰¹å¾è¯çš„åˆ†å¸ƒæƒ…å†µï¼Œä½¿å…¶æ— æ³•å¾ˆå¥½åœ°å®Œæˆå¯¹æƒå€¼è°ƒæ•´çš„åŠŸèƒ½ã€‚å°¤å…¶æ˜¯åœ¨åŒç±»è¯­æ–™åº“ä¸­ï¼Œè¿™ä¸€æ–¹æ³•æœ‰å¾ˆå¤§å¼Šç«¯ï¼Œå¾€å¾€ä¸€äº›åŒç±»æ–‡æœ¬çš„å…³é”®è¯è¢«æ©ç›–ã€‚ä¾‹å¦‚ï¼šè¯­æ–™åº“ $D$ ä¸­æ•™è‚²ç±»æ–‡ç« åå¤šï¼Œè€Œæ–‡æœ¬ $j $æ˜¯ä¸€ç¯‡å±äºæ•™è‚²ç±»çš„æ–‡ç« ï¼Œé‚£ä¹ˆæ•™è‚²ç±»ç›¸å…³çš„è¯è¯­çš„$ IDF $å€¼å°†ä¼šåå°ï¼Œä½¿æå–æ–‡æœ¬å…³é”®è¯çš„å¬å›ç‡æ›´ä½ã€‚å› æ­¤æ‰ä¼šæœ‰è¯è¯­é€†é¢‘ç‡æ–¹å¼è®¡ç®—åŠ æƒç®—æ³• $TF-IWF$ (Term Frequency-Inverse Word Frequency)ï¼Œå…³äº$TF-IWF$å°†ä¼šåœ¨ä¸‹ç¯‡æ–‡ç« è®²è§£ã€‚ å¹¶ä¸”ï¼Œç¬”è€…åœ¨å·¥ä½œå®è·µä¸­å‘ç°é’ˆå¯¹äºçŸ­å¥åº”ç”¨$TF-IDF$æå–å…³é”®è¯æ—¶ï¼Œç”±äºçŸ­å¥ä¸­æ¯ä¸ªè¯çš„$DF$å€¼å¾€å¾€æ˜¯ç›¸åŒçš„ï¼Œé‰´äºä¸Šè¿°$IDF$å¤©ç„¶çš„å¼±ç‚¹ï¼Œæ­¤ç®—æ³•åº”ç”¨äºçŸ­å¥åˆ†æä¹Ÿæ˜¾å¾—ä¸å¯é ï¼Œé’ˆå¯¹çŸ­å¥è¿™ç§æƒ…å†µï¼Œç¬”è€…çš„æ€è·¯æ˜¯ç»“åˆè¯æ€§å’Œé»‘ç™½åå•ä»¥åŠæœç´¢ç‚¹å‡»æ•°æ®å’Œä¸šåŠ¡æ‰“tagç­‰ï¼Œéœ€è¦æ¯”è¾ƒç»¼åˆçš„æ–¹å¼æ¥è§£å†³çŸ­å¥é—®é¢˜ã€‚ å‚è€ƒæ–‡çŒ® http://dx.doi.org/10.12677/csa.2013.31012","categories":[{"name":"nlp","slug":"nlp","permalink":"https://mokundong.cn/categories/nlp/"},{"name":"ä¸»é¢˜æŠ½å–","slug":"nlp/ä¸»é¢˜æŠ½å–","permalink":"https://mokundong.cn/categories/nlp/ä¸»é¢˜æŠ½å–/"}],"tags":[],"keywords":[{"name":"nlp","slug":"nlp","permalink":"https://mokundong.cn/categories/nlp/"},{"name":"ä¸»é¢˜æŠ½å–","slug":"nlp/ä¸»é¢˜æŠ½å–","permalink":"https://mokundong.cn/categories/nlp/ä¸»é¢˜æŠ½å–/"}]},{"title":"Qlearning-tutorial-part0","slug":"Qlearning-tensorflow-tutorial-part0","date":"2019-10-25T13:56:48.000Z","updated":"2019-11-01T01:34:25.487Z","comments":true,"path":"Qlearning-tensorflow-tutorial-part0/","link":"","permalink":"https://mokundong.cn/Qlearning-tensorflow-tutorial-part0/","excerpt":"","text":"&gt; æœ¬æ–‡ç¿»è¯‘è‡ª Simple Reinforcement Learning with Tensorflow Part 0: Q-Learning with Tables and Neural Networksï¼Œ ä½œè€…æ˜¯ Arthur Julianiï¼ŒåŸæ–‡é“¾æ¥ã€‚ Weâ€™ll be learning how to solve the OpenAI FrozenLake environment. Our version is a little less photo-realistic. åœ¨æœ¬å¼ºåŒ–å­¦ä¹ ç³»åˆ—æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†è¦æ¢è®¨ä¸€ç³»åˆ—ç§°ä¸ºQ-Learningçš„å¢å¼ºå­¦ä¹ ç®—æ³•ã€‚ä¸æ¥ä¸‹æ¥çš„ä¸‰ç« (Part1-3)ä»‹ç»çš„åŸºäºç­–ç•¥(policy-base)çš„å¢å¼ºå­¦ä¹ ç®—æ³•æœ‰æ‰€ä¸åŒã€‚ æˆ‘ä»¬å°†ä»å®ç°ä¸€ä¸ªç®€å•æŸ¥æ‰¾è¡¨ç®—æ³•å¼€å§‹ï¼Œç„¶åå±•ç¤ºå¦‚ä½•ä½¿ç”¨Tensorflowæ¥å®ç°ç­‰æ•ˆçš„ç¥ç»ç½‘ç»œã€‚è€ƒè™‘åˆ°ä¸Šè¿°å®‰æ’ï¼Œæˆ‘ä»¬éœ€è¦å›é¡¾åŸºç¡€çŸ¥è¯†ï¼Œæ‰€ä»¥å°†è¿™ä¸€ç¯‡è§†ä¸ºæœ¬ç³»åˆ—çš„ç¬¬0éƒ¨åˆ†ã€‚å¸Œæœ›é€šè¿‡è¿™ä¸ªç³»åˆ—çš„æ•™ç¨‹ï¼Œæˆ‘ä»¬åœ¨ç†è§£Q-learningä¹‹åï¼Œèƒ½å¤Ÿç»“åˆpolicy gradientå’ŒQ-learningæ–¹æ³•æ„å»ºæ›´å¥½çš„å¢å¼ºå­¦ä¹ ç½‘ç»œã€‚ï¼ˆå¦‚æœä½ å¯¹ç­–ç•¥ç½‘ç»œæ›´æ„Ÿå…´è¶£æˆ–è€…ä½ å·²ç»æœ‰ä¸€äº›Q-learningçš„ç»éªŒï¼Œé‚£ä¹ˆä½ å¯ä»¥ä»è¿™é‡Œå¼€å§‹é˜…è¯»ï¼‰ &nbsp; ç­–ç•¥æ¢¯åº¦ç®—æ³•(policy gradient)è¯•ç€å­¦ä¹ æŸä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ä»¥ç›´æ¥æŠŠçŠ¶æ€(state)æ˜ å°„ä¸ºåŠ¨ä½œ(action)çš„æ¦‚ç‡åˆ†å¸ƒã€‚Q-learningå’Œç­–ç•¥æ¢¯åº¦ç®—æ³•ä¸ä¸€æ ·ï¼Œå®ƒè¯•ç€å­¦ä¹ åœ¨æ¯ä¸ªçŠ¶æ€ä¸‹å¯¹åº”çš„å€¼ï¼Œå¹¶ä¸”ä¾èµ–è¯¥çŠ¶æ€æ‰§è¡ŒæŸä¸€ä¸ªåŠ¨ä½œã€‚è™½ç„¶ä¸¤ç§æ–¹æ³•æœ€ç»ˆéƒ½å…è®¸æˆ‘ä»¬ç»™å®šæƒ…å†µä¸‹é‡‡å–ç‰¹å®šçš„è¡ŒåŠ¨ï¼Œä½†æ˜¯å®ç°è¯¥ç›®çš„çš„æ–¹æ³•æ˜¯ä¸ç›¸åŒçš„ã€‚ä½ ä¹Ÿè®¸å·²ç»å¬è¯´æ·±åº¦Q-learningå¯ä»¥ç©atariæ¸¸æˆï¼Œæˆ‘ä»¬å°†è¦åœ¨è¿™é‡Œè®¨è®ºå’Œå®ç°è¿™äº›æ›´å¤æ‚å’Œå¼ºå¤§çš„Q-learningç®—æ³•ã€‚ Tabular Approaches for Tabular Environment(è¡¨ç¯å¢ƒä¸‹çš„è¡¨æ–¹æ³•) â€‹ The rules of the FrozenLake environment åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†è¦å°è¯•ä½¿ç”¨OpenAI gymè§£å†³FrozenLakeé—®é¢˜ã€‚OpenAI gymæä¾›äº†ä¸€ä¸ªç®€å•çš„ç¯å¢ƒï¼Œä½¿åˆå­¦è€…å¯ä»¥åœ¨ä»–ä»¬æä¾›ä¸€ç³»åˆ—æ¸¸æˆä¸­å°è¯•ä»–ä»¬çš„æ–¹æ³•ã€‚æ¯”å¦‚FrozenLakeï¼Œè¯¥æ¸¸æˆç¯å¢ƒåŒ…æ‹¬ä¸€ä¸ª4*4çš„ç½‘ç»œæ ¼å­ï¼Œæ¯ä¸ªæ ¼å­å¯ä»¥æ˜¯èµ·å§‹å—ï¼Œç›®æ ‡å—ã€å†»ç»“å—æˆ–è€…å±é™©å—ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è®©Agentå­¦ä¹ ä»å¼€å§‹å—åˆ°ç›®æ ‡å¿«è€Œä¸é™·å…¥å±é™©å—ã€‚åœ¨ä»»æ„æ—¶åˆ»ï¼ŒAgentèƒ½å¤Ÿä»»æ„é€‰æ‹©ä¸Šä¸‹å·¦å³æ–¹å‘ï¼Œå¶å°”ä¹Ÿä¼šè·³åˆ°å¹¶éAgenté€‰æ‹©çš„æ–¹å‘ã€‚å› æ­¤ï¼Œä¸æ˜¯æ¯ä¸€æ­¥éƒ½èƒ½è¾¾åˆ°ç›®æ ‡å¿«ï¼Œä½†æ˜¯å­¦ä¹ é¿å…å±é™©è¾¾åˆ°ç›®æ ‡ä»ç„¶æ˜¯å¯è¡Œçš„ã€‚æ¯ä¸€æ­¥é™¤äº†è¾¾åˆ°ç›®æ ‡å¥–åŠ±ä¸º1ä»¥å¤–ï¼Œå…¶ä»–å¥–åŠ±éƒ½æ˜¯0ã€‚å› æ­¤ï¼Œéœ€è¦å­¦ä¹ ä¸€ç§é•¿æœŸå¥–åŠ±çš„ç®—æ³•ï¼Œè¿™å°±æ˜¯Q-Learningå­¦ä¹ çš„è¦è¯€ã€‚ åœ¨æœ€ç®€å•çš„å®ç°ä¸­ï¼ŒQ-Learningæ˜¯ç¯å¢ƒä¸­æ¯ç§çŠ¶æ€ï¼ˆè¡Œï¼‰å’ŒåŠ¨ä½œï¼ˆåˆ—ï¼‰çš„è¡¨ã€‚åœ¨è¡¨æ ¼çš„æ¯ä¸ªå•å…ƒæ ¼ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼è¡¨ç¤ºåœ¨ç»™å®šçŠ¶æ€ä¸‹æ‰§è¡Œç»™å®šæ“ä½œçš„æ•ˆæœå¦‚ä½•ã€‚å¯¹äºFrozenLakeç¯å¢ƒï¼Œæˆ‘ä»¬æœ‰16ä¸ªå¯èƒ½çš„çŠ¶æ€ï¼ˆæ¯ä¸ªå—ä¸€ä¸ªï¼‰å’Œ4ä¸ªå¯èƒ½çš„åŠ¨ä½œï¼ˆå››ä¸ªè¿åŠ¨æ–¹å‘ï¼‰ï¼Œä»è€Œä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª16x4çš„Qå€¼è¡¨ã€‚æˆ‘ä»¬é¦–å…ˆå°†è¡¨æ ¼åˆå§‹åŒ–ä¸ºç»Ÿä¸€çš„ï¼ˆå…¨é›¶ï¼‰ï¼Œç„¶åè§‚å¯Ÿå„ç§åŠ¨ä½œæ‰€è·å¾—çš„å›æŠ¥ï¼Œç„¶åç›¸åº”åœ°æ›´æ–°è¡¨æ ¼ã€‚æˆ‘ä»¬ä½¿ç”¨ç§°ä¸ºBellmanæ–¹ç¨‹å¯¹Qè¡¨è¿›è¡Œæ›´æ–°ï¼Œè¯¥æ–¹ç¨‹è¡¨ç¤ºç»™å®šåŠ¨ä½œçš„é¢„æœŸé•¿æœŸå¥–åŠ±ç­‰äºå½“å‰åŠ¨ä½œçš„å³æ—¶å¥–åŠ±ä¸åœ¨é‡‡å–çš„æœ€ä½³æœªæ¥åŠ¨ä½œçš„é¢„æœŸå¥–åŠ±ç›¸ç»“åˆã€‚è¿™æ ·ï¼Œåœ¨ä¼°ç®—å¦‚ä½•ä¸ºå°†æ¥çš„æ“ä½œæ›´æ–°è¡¨æ—¶ï¼Œæˆ‘ä»¬å°†é‡ç”¨è‡ªå·±çš„Qè¡¨ï¼åœ¨æ–¹ç¨‹å¼ä¸­ï¼Œè§„åˆ™å¦‚ä¸‹æ‰€ç¤ºï¼š $$\\mathrm{Eq} 1 . \\mathrm{Q}(\\mathrm{s}, \\mathrm{a})=\\mathrm{r}+\\mathrm{\\gamma}\\left(\\max \\left(\\mathrm{Q}\\left(\\mathrm{s}^{\\prime}, \\mathrm{a}^{\\prime}\\right)\\right)\\right.$$ è¿™ä¸ªå…¬å¼çš„æè¿°äº†ä¸€ä¸ªç»™å®šçŠ¶æ€så’Œè¡ŒåŠ¨aä¸‹çš„Qå€¼ç­‰äºå½“å³è·å¾—çš„å›æŠ¥råŠ ä¸Šä¸€ä¸ªæŠ˜ç°å› å­Î³ä¹˜ä»¥èƒ½å¤Ÿæœ€å¤§åŒ–çš„åœ¨ä¸‹ä¸€çŠ¶æ€sâ€™é‡‡å–æ—¶èƒ½è·å¾—çš„æœ€å¤§é•¿æœŸå›æŠ¥çš„åŠ¨ä½œaâ€™å¯¹åº”çš„é•¿æœŸå›æŠ¥ã€‚æŠ˜ç°å› å­yå…è®¸æˆ‘ä»¬å†³å®šç›¸å¯¹äºå½“å‰å°±å¯ä»¥è·å¾—çš„å›æŠ¥ï¼Œæœªæ¥çš„å¯èƒ½å›æŠ¥çš„ç›¸å¯¹é‡è¦æ€§ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒQè¡¨ä¼šæ…¢æ…¢å¼€å§‹è·å¾—æ›´å‡†ç¡®çš„ä»»ä¸€ç»™å®šçŠ¶æ€ä¸‹ï¼Œé‡‡å–ä»»æ„åŠ¨ä½œæ‰€å¯¹åº”çš„æœŸæœ›æœªæ¥å›æŠ¥å€¼ã€‚ä»¥ä¸‹æ˜¯Pythonç‰ˆçš„å¯¹äºQè¡¨ç‰ˆæœ¬çš„å†°æ¹–ç¯å¢ƒè§£å†³æ–¹æ¡ˆçš„å®Œæ•´å®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546import gymimport numpy as npenv = gym.make('FrozenLake-v0')# Implement Q-Table learning algorithm# å®ç°Qè¡¨å­¦ä¹ ç®—æ³•# Initialize table with all zeros# åˆå§‹åŒ–Qè¡¨ä¸ºå…¨0å€¼Q = np.zeros([env.observation_space.n,env.action_space.n])# Set learning parameters# è®¾ç½®å­¦ä¹ å‚æ•°lr = .8y = .95num_episodes = 2000# create lists to contain total rewards and steps per episode# åˆ›å»ºåˆ—è¡¨ä»¥åŒ…å«æ¯ä¸ªepisodeçš„æ€»å›æŠ¥ä¸æ€»æ­¥æ•°jList = []rList = []for i in range(num_episodes): # Reset environment and get first new observation # åˆå§‹åŒ–ç¯å¢ƒå¹¶è·å¾—ç¬¬ä¸€ä¸ªè§‚å¯Ÿ s = env.reset() rAll = 0 d = False j = 0 # The Q-Table learning algorithm # Qè¡¨å­¦ä¹ ç®—æ³• while j &lt; 99: j+=1 # Choose an action by greedily (with noise) picking from Q table # åŸºäºQè¡¨è´ªå©ªåœ°é€‰æ‹©ä¸€ä¸ªæœ€ä¼˜è¡ŒåŠ¨ï¼ˆæœ‰å™ªéŸ³å¹²æ‰°ï¼‰ a = np.argmax(Q[s,:] + np.random.randn(1,env.action_space.n)*(1./(i+1))) # Get new state and reward from environment # ä»ç¯å¢ƒä¸­è·å¾—å›æŠ¥å’Œæ–°çš„çŠ¶æ€ä¿¡æ¯ s1,r,d,_ = env.step(a) #Update Q-Table with new knowledge # ç”¨æ–°çš„çŸ¥è¯†æ›´æ–°Qè¡¨ Q[s,a] = Q[s,a] + lr*(r + y*np.max(Q[s1,:]) - Q[s,a]) rAll += r s = s1 if d == True: break #jList.append(j) rList.append(rAll)print(\"Score over time: \" + str(sum(rList)/num_episodes))print(\"Final Q-Table Values\")print(Q) (æ„Ÿè°¢Praneet Dæ‰¾åˆ°äº†è¯¥å®ç°æ–¹æ³•å¯¹åº”çš„æœ€ä¼˜çš„è¶…å‚æ•°ï¼‰ ## Q-Learning with Neural Networks(åŸºäºç¥ç»ç½‘ç»œçš„Q-Learning) ç°åœ¨ä½ å¯èƒ½è®¤ä¸ºï¼šè¡¨æ ¼æ–¹æ³•æŒºå¥½çš„ï¼Œä½†æ˜¯å®ƒä¸èƒ½è§„æ¨¡åŒ–ï¼ˆscaleï¼‰ï¼Œä¸æ˜¯å—ï¼Ÿå› ä¸ºå¯¹ä¸€ä¸ªç®€å•çš„ç½‘æ ¼ä¸–ç•Œå»ºç«‹ä¸€ä¸ª164çš„è¡¨æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œä½†æ˜¯åœ¨ä»»ä½•ä¸€ä¸ªç°åœ¨çš„æ¸¸æˆæˆ–çœŸå®ä¸–ç•Œç¯å¢ƒä¸­éƒ½æœ‰æ— æ•°å¯èƒ½çš„çŠ¶æ€ã€‚å¯¹äºå¤§å¤šæ•°æœ‰è¶£çš„é—®é¢˜ï¼Œè¡¨æ ¼éƒ½æ— æ³•å‘æŒ¥å‡ºä½œç”¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›ä»£æ›¿æ€§çš„æ–¹æ¡ˆæ¥æè¿°æˆ‘ä»¬çš„çŠ¶æ€ï¼Œå¹¶ç”Ÿæˆå¯¹åº”åŠ¨ä½œçš„Qå€¼ï¼šè¿™ä¹Ÿå°±æ˜¯***ç¥ç»ç½‘ç»œï¼ˆNeural Networkï¼Œç®€ç§°NNï¼‰****å¯ä»¥å¤§å±•èº«æ‰‹çš„åœ°æ–¹ã€‚NNå¯ä»¥ä½œä¸ºä¸€ä¸ªåŠ¨ä½œä¼°è®¡å™¨ï¼ˆfunction approximatorï¼‰ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè¾“å…¥ä»»æ„å¤šçš„å¯èƒ½çŠ¶æ€ï¼Œå› ä¸ºæ‰€æœ‰çŠ¶æ€éƒ½å¯ä»¥è¢«ç¼–ç æˆä¸€ä¸ªä¸ªå‘é‡ï¼Œå¹¶æŠŠå®ƒä»¬å’Œå„è‡ªå¯¹åº”çš„Qå€¼è¿›è¡Œå¯¹åº”ï¼ˆmapï¼‰ã€‚ åœ¨å†°æ¹–ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªä¸€å±‚çš„NNï¼Œå®ƒæ¥å—ä»¥one-hotå½¢å¼ç¼–ç çš„çŠ¶æ€å‘é‡ï¼ˆ116ï¼‰ï¼Œå¹¶è¾“å‡ºä¸€ä¸ªå«æœ‰4ä¸ªQå€¼çš„å‘é‡ï¼Œæ¯ä¸ªåˆ†é‡å¯¹åº”ä¸€ä¸ªåŠ¨ä½œçš„é•¿æœŸæœŸæœ›å›æŠ¥ã€‚è¿™æ ·ä¸€ä¸ªç®€å•çš„NNå°±åƒä¸€ä¸ªå¼ºåŒ–ç‰ˆçš„Qè¡¨ï¼Œè€Œç½‘ç»œçš„æƒé‡å°±å‘æŒ¥ç€æ›¾ç»çš„Qè¡¨ä¸­çš„å„ä¸ªå•å…ƒæ ¼çš„ä½œç”¨ã€‚å…³é”®çš„ä¸åŒæ—¶æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿ç®€æ˜“åœ°æ‰©å……Tensorflowç½‘ç»œï¼ŒåŒ…æ‹¬åŠ æ–°çš„å±‚ï¼Œæ¿€æ´»å‡½æ•°ä»¥åŠä¸åŒçš„è¾“å‡ºç±»å‹ï¼Œè€Œè¿™äº›éƒ½æ˜¯ä¸€ä¸ªä¸€èˆ¬çš„è¡¨æ ¼æ— æ³•åšåˆ°çš„ã€‚äºæ˜¯ï¼Œæ›´æ–°çš„æ–¹æ³•ä¹Ÿå‘ç”Ÿäº†ä¸€ç‚¹å˜åŒ–ã€‚ç›¸æ¯”äºä¹‹å‰ç›´æ¥æ›´æ–°è¡¨æ ¼ï¼Œæˆ‘ä»¬ç°åœ¨å°†ä½¿ç”¨***é€†ä¼ æ’­ï¼ˆbackpropagationï¼‰å’Œ**æŸå¤±å‡½æ•°ï¼ˆloss functionï¼‰æ¥å®Œæˆæ›´æ–°ã€‚æˆ‘ä»¬çš„æŸå¤±å‡½æ•°é‡‡å–å¹³æ–¹å’ŒæŸå¤±çš„å½¢å¼ï¼Œå³åŠ æ€»å½“å‰é¢„æµ‹çš„Qå€¼ä¸ç›®æ ‡å€¼é—´çš„å·®å€¼çš„å¹³æ–¹ï¼Œå¹¶ä»¥æ¢¯åº¦å½¢å¼åœ¨ç½‘ç»œä¸­ä¼ æ’­ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæ‰€é€‰è¡ŒåŠ¨çš„ç›®æ ‡Qå€¼ä¾ç„¶é‡‡ç”¨ä¸Šé¢æåˆ°çš„è´å°”æ›¼æ–¹ç¨‹ä¸­çš„è®¡ç®—æ–¹æ³•ã€‚ $$\\mathrm{Eq2} .\\mathrm{Loss}=\\sum(\\mathrm{Q}-{target}-\\mathrm{Q})^2$$ ä»¥ä¸‹æ˜¯Tensorflowå®ç°ç®€å•çš„Q-Networkçš„å®Œæ•´ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192# Q-Network Learning# Qç½‘ç»œå­¦ä¹ import gymimport numpy as npimport randomimport tensorflow as tfimport matplotlib.pyplot as plt%matplotlib inline# Load the environment# åŠ è½½ç¯å¢ƒenv = gym.make('FrozenLake-v0')# Qç½‘ç»œæ–¹æ³•# Implementing the network itself# å®ç°ç½‘ç»œtf.reset_default_graph()# These lines establish the feed-forward part of the network used to choose actions# ä¸‹é¢çš„å‡ è¡Œä»£ç å»ºç«‹äº†ç½‘ç»œçš„å‰é¦ˆéƒ¨åˆ†ï¼Œå®ƒå°†ç”¨äºé€‰æ‹©è¡ŒåŠ¨inputs1 = tf.placeholder(shape=[1,16],dtype=tf.float32)W = tf.Variable(tf.random_uniform([16,4],0,0.01))Qout = tf.matmul(inputs1,W)predict = tf.argmax(Qout,1)# Below we obtain the loss by taking the sum of squares difference between the target and prediction Q values.# ä¸‹é¢çš„å‡ è¡Œä»£ç å¯ä»¥è·å¾—é¢„æµ‹Qå€¼ä¸ç›®æ ‡Qå€¼é—´å·®å€¼çš„å¹³æ–¹å’ŒåŠ æ€»çš„æŸå¤±ã€‚nextQ = tf.placeholder(shape=[1,4],dtype=tf.float32)loss = tf.reduce_sum(tf.square(nextQ - Qout))trainer = tf.train.GradientDescentOptimizer(learning_rate=0.1)updateModel = trainer.minimize(loss)# Training the network# è®­ç»ƒç½‘ç»œinit = tf.initialize_all_variables()# Set learning parameters# è®¾ç½®å­¦ä¹ å‚æ•°y = .99e = 0.1num_episodes = 2000#create lists to contain total rewards and steps per episode# åˆ›å»ºåˆ—è¡¨ä»¥åŒ…å«æ¯ä¸ªepisodeå¯¹åº”çš„æ€»å›æŠ¥ä¸æ€»æ­¥æ•°ã€‚jList = []rList = []with tf.Session() as sess: sess.run(init) for i in range(num_episodes): # Reset environment and get first new observation # åˆå§‹åŒ–ç¯å¢ƒå¹¶è·å¾—ç¬¬ä¸€ä¸ªè§‚å¯Ÿ s = env.reset() rAll = 0 d = False j = 0 # The Q-Network # Qç½‘ç»œ while j &lt; 99: j+=1 #Choose an action by greedily (with e chance of random action) from the Q-network # åŸºäºQç½‘ç»œçš„è¾“å‡ºç»“æœï¼Œè´ªå©ªåœ°é€‰æ‹©ä¸€ä¸ªè¡ŒåŠ¨ï¼ˆæœ‰ä¸€å®šçš„æ¦‚ç‡é€‰æ‹©éšæœºè¡ŒåŠ¨ï¼‰ a,allQ = sess.run([predict,Qout],feed_dict=&#123;inputs1:np.identity(16)[s:s+1]&#125;) if np.random.rand(1) &lt; e: a[0] = env.action_space.sample() # Get new state and reward from environment # ä»ç¯å¢ƒä¸­è·å¾—å›æŠ¥ä»¥åŠæ–°çš„çŠ¶æ€ä¿¡æ¯ s1,r,d,_ = env.step(a[0]) # Obtain the Q' values by feeding the new state through our network # é€šè¿‡å°†æ–°çš„çŠ¶æ€å‘é‡è¾“å…¥åˆ°ç½‘ç»œä¸­è·å¾—Qå€¼ã€‚ Q1 = sess.run(Qout,feed_dict=&#123;inputs1:np.identity(16)[s1:s1+1]&#125;) # Obtain maxQ' and set our target value for chosen action. # è·å¾—æœ€å¤§çš„Qå€¼ï¼Œå¹¶ä¸ºæ‰€é€‰è¡Œä¸ºè®¾å®šç›®æ ‡å€¼ maxQ1 = np.max(Q1) targetQ = allQ targetQ[0,a[0]] = r + y*maxQ1 # Train our network using target and predicted Q values # ç”¨ç›®æ ‡å’Œé¢„æµ‹çš„Qå€¼è®­ç»ƒç½‘ç»œ _,W1 = sess.run([updateModel,W],feed_dict=&#123;inputs1:np.identity(16[s:s+1],nextQ:targetQ&#125;) rAll += r s = s1 if d == True: # Reduce chance of random action as we train the model. # éšç€è®­ç»ƒçš„è¿›è¡Œï¼Œä¸»é”®å‡å°‘é€‰æ‹©éšæœºè¡Œä¸ºçš„æ¦‚ç‡ e = 1./((i/50) + 10) break jList.append(j) rList.append(rAll)print(\"Percent of succesful episodes: \" + str(sum(rList)/num_episodes) + \"%\")# Percent of succesful episodes: 0.352%# æˆåŠŸçš„episodeæ¯”ä¾‹ï¼š0.352% Some statistics on network performance We can see that the network beings to consistly reach the goal around the 750 episode mark. 1plt.plot(rList) 1plt.plot(jList) è™½ç„¶ç½‘ç»œå­¦ä¼šäº†è§£å†³å†°æ¹–é—®é¢˜ï¼Œä½†æ˜¯ç»“æœè¡¨æ˜å®ƒä¼¼ä¹æ¯”å¦‚Qè¡¨æ–¹æ³•é‚£ä¹ˆé«˜æ•ˆã€‚å³è™½ç„¶ç¥ç»ç½‘ç»œåœ¨Q-Learningé—®é¢˜ä¸Šæä¾›äº†æ›´é«˜çš„çµæ´»æ€§ï¼Œä½†å®ƒä¹Ÿç‰ºç‰²äº†ä¸€å®šçš„ç¨³å®šæ€§ã€‚è¿˜æœ‰å¾ˆå¤šå¯èƒ½çš„å¯¹æˆ‘ä»¬çš„ç®€å•Qç½‘ç»œè¿›è¡Œæ‰©å±•çš„åŠæ³•ï¼Œè¿™äº›æ‰©å±•å¯ä»¥è®©NNè·å¾—æ›´å¥½çš„æ€§èƒ½å¹¶å®ç°æ›´ç¨³å®šçš„å­¦ä¹ è¿‡ç¨‹ã€‚ä¸¤ç§éœ€è¦æåˆ°çš„ç‰¹åˆ«æŠ€å·§åˆ†åˆ«æ˜¯\\ç»éªŒé‡æ”¾ï¼ˆExperience Replayï¼‰å’Œå†°å†»ç›®æ ‡ç½‘ç»œï¼ˆFreezing Target Networksï¼‰**ã€‚è¿™äº›æ”¹è¿›æ–¹å¼æˆ–è€…å…¶å®ƒçš„ä¸€äº›æŠ€å·§éƒ½æ˜¯è®©DQNå¯ä»¥ç©Atariæ¸¸æˆçš„å…³é”®æ‰€åœ¨ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¹Ÿå°†åœ¨åé¢æ¢ç´¢è¿™äº›ç›¸å…³çŸ¥è¯†ã€‚å¯¹äºæœ‰å…³Q-Learningçš„æ›´å¤šç†è®ºï¼Œå¯ä»¥çœ‹Tambet Matiisençš„è¿™ç¯‡åšæ–‡ï¼Œå¸Œæœ›æœ¬æ•™ç¨‹å¯ä»¥å¸®åŠ©å¯¹å®ç°ç®€å•Q-Learningç®—æ³•çš„äººä»¬ä¸€äº›å¸®åŠ©ï¼","categories":[{"name":"å¼ºåŒ–å­¦ä¹ ","slug":"å¼ºåŒ–å­¦ä¹ ","permalink":"https://mokundong.cn/categories/å¼ºåŒ–å­¦ä¹ /"},{"name":"tutorial","slug":"å¼ºåŒ–å­¦ä¹ /tutorial","permalink":"https://mokundong.cn/categories/å¼ºåŒ–å­¦ä¹ /tutorial/"}],"tags":[],"keywords":[{"name":"å¼ºåŒ–å­¦ä¹ ","slug":"å¼ºåŒ–å­¦ä¹ ","permalink":"https://mokundong.cn/categories/å¼ºåŒ–å­¦ä¹ /"},{"name":"tutorial","slug":"å¼ºåŒ–å­¦ä¹ /tutorial","permalink":"https://mokundong.cn/categories/å¼ºåŒ–å­¦ä¹ /tutorial/"}]},{"title":"share-python-books","slug":"share-python-books","date":"2019-10-25T09:51:46.000Z","updated":"2019-11-01T01:34:34.503Z","comments":true,"path":"share-python-books/","link":"","permalink":"https://mokundong.cn/share-python-books/","excerpt":"","text":"python books åºå· é“¾æ¥ æå–ç  1 python cookbook ä¸­æ–‡ kswl 2 python3 ç¨‹åºå¼€å‘æŒ‡å— kvqo 3 python3 å»–é›ªå³°æŒ‡å— 8ngw 4 pythoné«˜æ€§èƒ½ç¼–ç¨‹ eaud 5 æµç•…çš„python vok4 è¯´æ˜ å…¥é—¨å»ºè®®é¦–é€‰å»–é›ªå³°çš„pythonæŒ‡å—æˆ–è€…å‚è€ƒPython3 èœé¸Ÿæ•™ç¨‹ï¼›","categories":[{"name":"èµ„æ–™åˆ†äº«","slug":"èµ„æ–™åˆ†äº«","permalink":"https://mokundong.cn/categories/èµ„æ–™åˆ†äº«/"},{"name":"pythonbook","slug":"èµ„æ–™åˆ†äº«/pythonbook","permalink":"https://mokundong.cn/categories/èµ„æ–™åˆ†äº«/pythonbook/"}],"tags":[],"keywords":[{"name":"èµ„æ–™åˆ†äº«","slug":"èµ„æ–™åˆ†äº«","permalink":"https://mokundong.cn/categories/èµ„æ–™åˆ†äº«/"},{"name":"pythonbook","slug":"èµ„æ–™åˆ†äº«/pythonbook","permalink":"https://mokundong.cn/categories/èµ„æ–™åˆ†äº«/pythonbook/"}]},{"title":"flaskéƒ¨ç½²æ·±åº¦å­¦ä¹ æ¨¡å‹","slug":"python-flask-deeplearing-service","date":"2019-10-25T08:44:39.000Z","updated":"2019-10-25T09:47:29.903Z","comments":true,"path":"python-flask-deeplearing-service/","link":"","permalink":"https://mokundong.cn/python-flask-deeplearing-service/","excerpt":"","text":"ä½œä¸ºè‘—åPython webæ¡†æ¶ä¹‹ä¸€çš„Flaskï¼Œå…·æœ‰ç®€å•è½»é‡ã€çµæ´»ã€æ‰©å±•ä¸°å¯Œä¸”ä¸Šæ‰‹éš¾åº¦ä½çš„ç‰¹ç‚¹ï¼Œå› æ­¤æˆä¸ºäº†æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ æ¨¡å‹ä¸Šçº¿è·‘å®šæ—¶ä»»åŠ¡ï¼Œæä¾›APIçš„é¦–é€‰æ¡†æ¶ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼ŒFlaské»˜è®¤ä¸æ”¯æŒéé˜»å¡IOçš„ï¼Œå½“è¯·æ±‚Aè¿˜æœªå®Œæˆæ—¶å€™ï¼Œè¯·æ±‚Béœ€è¦ç­‰å¾…è¯·æ±‚Aå®Œæˆåæ‰èƒ½è¢«å¤„ç†ï¼Œæ‰€ä»¥æ•ˆç‡éå¸¸ä½ã€‚ä½†æ˜¯çº¿ä¸Šä»»åŠ¡é€šå¸¸éœ€è¦å¼‚æ­¥ã€é«˜å¹¶å‘ç­‰éœ€æ±‚ï¼Œæœ¬æ–‡æ€»ç»“ä¸€äº›åœ¨æ—¥å¸¸ä½¿ç”¨è¿‡ç¨‹ä¸­æ‰€å¸¸ç”¨çš„æŠ€å·§ã€‚ ä¸€ã€å‰æ²¿ å¼‚æ­¥å’Œå¤šçº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå…¶å®ï¼Œå¼‚æ­¥æ˜¯ç›®çš„ï¼Œè€Œå¤šçº¿ç¨‹æ˜¯å®ç°è¿™ä¸ªç›®çš„çš„æ–¹æ³•ã€‚å¼‚æ­¥æ˜¯è¯´ï¼ŒAå‘èµ·ä¸€ä¸ªæ“ä½œåï¼ˆä¸€èˆ¬éƒ½æ˜¯æ¯”è¾ƒè€—æ—¶çš„æ“ä½œï¼Œå¦‚æœä¸è€—æ—¶çš„æ“ä½œå°±æ²¡æœ‰å¿…è¦å¼‚æ­¥äº†ï¼‰ï¼Œå¯ä»¥ç»§ç»­è‡ªé¡¾è‡ªçš„å¤„ç†å®ƒè‡ªå·±çš„äº‹å„¿ï¼Œä¸ç”¨å¹²ç­‰ç€è¿™ä¸ªè€—æ—¶æ“ä½œè¿”å›ã€‚å®ç°å¼‚æ­¥å¯ä»¥é‡‡ç”¨å¤šçº¿ç¨‹æŠ€æœ¯æˆ–åˆ™äº¤ç»™å¦å¤–çš„è¿›ç¨‹æ¥å¤„ç†,è¯¦è§£å¸¸è§è¿™é‡Œã€‚ äºŒã€å®ç°æ–¹æ³• Flaskå¯åŠ¨è‡ªå¸¦æ–¹æ³• é‡‡ç”¨gunicornéƒ¨ç½² 1ã€Flaskä¸­è‡ªå¸¦æ–¹æ³•å®ç° run.py #!/usr/bin/env python # -*- coding: utf-8 -*- # @Time : 2018-12-01 16:37 # @Author : mokundong from flask import Flask import socket from time import sleep myhost = socket.gethostbyname(socket.gethostname()) app = Flask(__name__) @app.route('/job1') def some_long_task1(): print(\"Task #1 started!\") sleep(10) print(\"Task #1 is done!\") @app.route('/job2') def some_long_task2(arg1, arg2): print(\"Task #2 started with args: %s %s!\" % (arg1, arg2)) sleep(5) print(\"Task #2 is done!\") if __name__ == '__main__': app.run(host=myhost,port=5000,threaded=True) app.run(host=xxx,port=xx,threaded=True)ä¸­threadedå¼€å¯ååˆ™ä¸éœ€è¦ç­‰é˜Ÿåˆ—ã€‚ 2ã€gunicornéƒ¨ç½² Gunicorn æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„Python WSGI Server,é€šå¸¸ç”¨å®ƒæ¥è¿è¡Œ wsgi application æˆ–è€… wsgi framework(å¦‚Django,Paster,Flask),åœ°ä½ç›¸å½“äºJavaä¸­çš„Tomcatã€‚gunicorn ä¼šå¯åŠ¨ä¸€ç»„ workerè¿›ç¨‹ï¼Œæ‰€æœ‰workerè¿›ç¨‹å…¬ç”¨ä¸€ç»„listenerï¼Œåœ¨æ¯ä¸ªworkerä¸­ä¸ºæ¯ä¸ªlistenerå»ºç«‹ä¸€ä¸ªwsgi serverã€‚æ¯å½“æœ‰HTTPé“¾æ¥åˆ°æ¥æ—¶ï¼Œwsgi serveråˆ›å»ºä¸€ä¸ªåç¨‹æ¥å¤„ç†è¯¥é“¾æ¥ï¼Œåç¨‹å¤„ç†è¯¥é“¾æ¥çš„æ—¶å€™ï¼Œå…ˆåˆå§‹åŒ–WSGIç¯å¢ƒï¼Œç„¶åè°ƒç”¨ç”¨æˆ·æä¾›çš„appå¯¹è±¡å»å¤„ç†HTTPè¯·æ±‚ã€‚å…³äºgunicornçš„è¯¦ç»†è¯´æ˜ï¼Œå¯ä»¥å‚è€ƒè¿™é‡Œã€‚ ä½¿ç”¨å‘½ä»¤è¡Œå¯åŠ¨gunicornæœ‰ä¸¤ç§æ–¹å¼è·å–é…ç½®é¡¹ï¼Œä¸€ç§æ˜¯åœ¨å‘½ä»¤è¡Œé…ç½®ï¼Œä¸€ç§æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­è·å–ã€‚ run.py #!/usr/bin/env python # -*- coding: utf-8 -*- # @Time : 2018-12-01 17:00 # @Author : mokundong from flask import Flask from time import sleep app = Flask(__name__) @app.route('/job1') def some_long_task1(): print(\"Task #1 started!\") sleep(10) print(\"Task #1 is done!\") @app.route('/job2') def some_long_task2(arg1, arg2): print(\"Task #2 started with args: %s %s!\" % (arg1, arg2)) sleep(5) print(\"Task #2 is done!\") if __name__ == '__main__': app.run() å‘½ä»¤è¡Œé…ç½®gunicorn --workers=4 --bind=127.0.0.1:8000 run:app æ›´å¤šé…ç½®è§å®˜ç½‘ é…ç½®æ–‡ä»¶è·å–é…ç½® gunicorn_config.py #!/usr/bin/env python # -*- coding: utf-8 -*- # @Time : 2018-12-01 17:10 # @Author : mokundong import os import socket import multiprocessing import gevent.monkey gevent.monkey.patch_all() myhost = socket.gethostbyname(socket.gethostname()) debug = False loglevel = 'info' hosts = get_host_ip() bind = hosts+\":5000\" timeout = 30 #è¶…æ—¶ pidfile = \"log/gunicorn.pid\" accesslog = \"log/access.log\" errorlog = \"log/debug.log\" daemon = True #æ„å‘³ç€å¼€å¯åå°è¿è¡Œï¼Œé»˜è®¤ä¸ºFalse workers = 4 # å¯åŠ¨çš„è¿›ç¨‹æ•° threads = 2 #æŒ‡å®šæ¯ä¸ªè¿›ç¨‹å¼€å¯çš„çº¿ç¨‹æ•° worker_class = 'gevent' #é»˜è®¤ä¸ºsyncæ¨¡å¼ï¼Œä¹Ÿå¯ä½¿ç”¨geventæ¨¡å¼ã€‚ x_forwarded_for_header = 'X-FORWARDED-FOR' å¯åŠ¨å‘½ä»¤å¦‚ä¸‹ gunicorn -c gunicorn_config.py run:app ä¸‰ã€è¡¥å……1ã€å…³äºçº¿ç¨‹çš„è¡¥å…… åœ¨å·¥ä½œä¸­æˆ‘è¿˜é‡åˆ°ä¸€ç§æƒ…å†µï¼Œå½“ä¸€ä¸ªè¯·æ±‚è¿‡æ¥åï¼Œæˆ‘éœ€è¦ä¸¤ç§å›åº”ï¼Œä¸€ä¸ªæ˜¯åŠæ—¶è¿”å›appè¿è¡Œç»“æœï¼Œç¬¬äºŒä¸ªå“åº”æ˜¯ä¿å­˜æ•°æ®åˆ°æ—¥å¿—æˆ–è€…æ•°æ®åº“ã€‚å¾€å¾€æˆ‘ä»¬åœ¨å†™æ•°æ®çš„è¿‡ç¨‹ä¸­ä¼šèŠ±é”€ä¸€å®šçš„æ—¶é—´ï¼Œå¯¼è‡´ç»“æœè¿”å›ä¼šæœ‰æ‰€å»¶è¿Ÿï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ç”¨ä¸¤ä¸ªçº¿ç¨‹å¤„ç†è¿™ä¸¤ä¸ªä»»åŠ¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä¸‹å¤„ç†ã€‚ run.py #!/usr/bin/env python # -*- coding: utf-8 -*- # @Time : 2018-12-01 17:20 # @Author : mokundong from flask import Flask,request from time import sleep from concurrent.futures import ThreadPoolExecutor executor = ThreadPoolExecutor(2) app = Flask(__name__) @app.route('/job') def run_jobs(): executor.submit(some_long_task1) executor.submit(some_long_task2, 'hello', 123) return 'Two jobs was launched in background!' def some_long_task1(): print(\"Task #1 started!\") sleep(10) print(\"Task #1 is done!\") def some_long_task2(arg1, arg2): print(\"Task #2 started with args: %s %s!\" % (arg1, arg2)) sleep(5) print(\"Task #2 is done!\") if __name__ == '__main__': app.run() 2ã€å…³äºè·å–IPçš„è¡¥å…… ä¸Šè¿°ä»£ç ä¸­é€šè¿‡è·å–hostnameï¼Œç„¶åå†é€šè¿‡hostnameåæŸ¥å¤„æœºå™¨çš„IPã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ä¸æ¨èçš„ã€‚å› ä¸ºå¾ˆå¤šçš„æœºå™¨æ²¡æœ‰è§„èŒƒè¿™ä¸ªhostnameçš„è®¾ç½®ã€‚å¦å¤–å°±æ˜¯æœ‰äº›æœåŠ¡å™¨ä¼šåœ¨ /etc/hosts ä¸­æ·»åŠ æœ¬æœºçš„hostnameçš„åœ°å€ï¼Œè¿™ä¸ªåšæ³•ä¹Ÿä¸æ˜¯ä¸å¯ä»¥ï¼Œä½†æ˜¯å¦‚æœè®¾ç½®æˆäº† 127.0.0.1ï¼Œé‚£ä¹ˆè·å–å‡ºæ¥çš„IPå°±éƒ½æ˜¯è¿™ä¸ªåœ°å€äº†ã€‚è¿™é‡Œç»™å‡ºä¸€ç§ä¼˜é›…çš„æ–¹å¼è·å–IPï¼Œåˆ©ç”¨ UDP åè®®æ¥å®ç°çš„ï¼Œç”Ÿæˆä¸€ä¸ªUDPåŒ…ï¼ŒæŠŠè‡ªå·±çš„ IP æ”¾å¦‚åˆ° UDP åè®®å¤´ä¸­ï¼Œç„¶åä»UDPåŒ…ä¸­è·å–æœ¬æœºçš„IPã€‚ #!/usr/bin/env python # -*- coding: utf-8 -*- # @Time : 2018-12-01 17:30 # @Author : mokundong # å¯ä»¥å°è£…æˆå‡½æ•°ï¼Œæ–¹ä¾¿ Python çš„ç¨‹åºè°ƒç”¨ import socket def get_host_ip(): try: s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) s.connect(('8.8.8.8', 80)) ip = s.getsockname()[0] finally: s.close() return ip æ€»ç»“å½“ç„¶æ¨èä½¿ç”¨gunicornéƒ¨ç½²å¤šçº¿ç¨‹ï¼ŒFlaskè‡ªå¸¦çš„ï¼Œemmmmï¼Œæµ‹è¯•ç©å„¿ç©å„¿å§ã€‚åœ¨å†™ä½œè¿‡ç¨‹ä¸­æ‰å‘ç°è‡ªå·±çŸ¥è¯†æ¼æ´ä¸æ˜¯ä¸€èˆ¬å¤šï¼Œå…±å‹‰ï¼","categories":[{"name":"python","slug":"python","permalink":"https://mokundong.cn/categories/python/"},{"name":"flask","slug":"python/flask","permalink":"https://mokundong.cn/categories/python/flask/"}],"tags":[],"keywords":[{"name":"python","slug":"python","permalink":"https://mokundong.cn/categories/python/"},{"name":"flask","slug":"python/flask","permalink":"https://mokundong.cn/categories/python/flask/"}]},{"title":"keras-test","slug":"python-keras-test","date":"2018-12-12T14:16:01.000Z","updated":"2019-11-01T01:34:13.188Z","comments":true,"path":"python-keras-test/","link":"","permalink":"https://mokundong.cn/python-keras-test/","excerpt":"","text":"12import tensorflow as tfimport tensorflow.keras as keras","categories":[{"name":"python","slug":"python","permalink":"https://mokundong.cn/categories/python/"},{"name":"keras","slug":"python/keras","permalink":"https://mokundong.cn/categories/python/keras/"}],"tags":[],"keywords":[{"name":"python","slug":"python","permalink":"https://mokundong.cn/categories/python/"},{"name":"keras","slug":"python/keras","permalink":"https://mokundong.cn/categories/python/keras/"}]}]}