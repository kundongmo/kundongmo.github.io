{"meta":{"title":"è«å¤ä¸œçš„åšå®¢","subtitle":null,"description":null,"author":"å°ç™½","url":"https://mokundong.cn"},"pages":[{"title":"","date":"2019-10-25T09:40:40.186Z","updated":"2019-02-21T11:34:20.574Z","comments":true,"path":"googlea31bfe60691413ce.html","permalink":"https://mokundong.cn/googlea31bfe60691413ce.html","excerpt":"","text":"google-site-verification: googlea31bfe60691413ce.html"},{"title":"bangumi","date":"2019-02-10T13:32:48.000Z","updated":"2019-10-15T15:10:33.000Z","comments":false,"path":"bangumi/index.html","permalink":"https://mokundong.cn/bangumi/index.html","excerpt":"","text":"","keywords":null},{"title":"about","date":"2018-12-12T14:14:36.000Z","updated":"2019-10-25T08:38:51.697Z","comments":true,"path":"about/index.html","permalink":"https://mokundong.cn/about/index.html","excerpt":"","text":"ç®€å†é¡¹ç›®","keywords":"å…³äº"},{"title":"categories","date":"2019-01-13T04:38:07.000Z","updated":"2019-02-21T11:34:20.956Z","comments":true,"path":"categories/index.html","permalink":"https://mokundong.cn/categories/index.html","excerpt":"","text":""},{"title":"client","date":"2018-12-20T15:13:35.000Z","updated":"2019-10-15T15:10:33.000Z","comments":false,"path":"client/index.html","permalink":"https://mokundong.cn/client/index.html","excerpt":"","text":"ç›´æ¥ä¸‹è½½ or æ‰«ç ä¸‹è½½ï¼š","keywords":"Androidå®¢æˆ·ç«¯"},{"title":"comment","date":"2018-12-20T15:13:48.000Z","updated":"2019-10-15T15:10:33.000Z","comments":true,"path":"comment/index.html","permalink":"https://mokundong.cn/comment/index.html","excerpt":"","text":"å¿µä¸¤å¥è¯— å™åˆ«æ¢¦ã€æ‰¬å·ä¸€è§‰ã€‚ ã€å®‹ä»£ã€‘å´æ–‡è‹±ã€Šå¤œæ¸¸å®«Â·äººå»è¥¿æ¥¼é›æ³ã€‹","keywords":"ç•™è¨€æ¿"},{"title":"donate","date":"2018-12-20T15:13:05.000Z","updated":"2019-10-15T15:10:33.000Z","comments":false,"path":"donate/index.html","permalink":"https://mokundong.cn/donate/index.html","excerpt":"","text":"","keywords":"è°¢è°¢é¥²ä¸»äº†å–µ~"},{"title":"lab","date":"2019-01-05T13:47:59.000Z","updated":"2019-10-15T15:10:33.000Z","comments":false,"path":"lab/index.html","permalink":"https://mokundong.cn/lab/index.html","excerpt":"","text":"sakuraä¸»é¢˜balabala","keywords":"Labå®éªŒå®¤"},{"title":"links","date":"2018-12-19T15:11:06.000Z","updated":"2019-10-15T15:10:33.000Z","comments":true,"path":"links/index.html","permalink":"https://mokundong.cn/links/index.html","excerpt":"","text":"","keywords":"å‹äººå¸"},{"title":"music","date":"2018-12-20T15:14:28.000Z","updated":"2019-10-15T15:10:33.000Z","comments":false,"path":"music/index.html","permalink":"https://mokundong.cn/music/index.html","excerpt":"","text":"","keywords":"å–œæ¬¢çš„éŸ³ä¹"},{"title":"rss","date":"2018-12-20T15:09:03.000Z","updated":"2019-10-15T15:10:33.000Z","comments":true,"path":"rss/index.html","permalink":"https://mokundong.cn/rss/index.html","excerpt":"","text":""},{"title":"tags","date":"2018-12-12T14:14:16.000Z","updated":"2019-10-15T15:10:33.000Z","comments":true,"path":"tags/index.html","permalink":"https://mokundong.cn/tags/index.html","excerpt":"","text":""},{"title":"theme-sakura","date":"2019-01-04T14:53:25.000Z","updated":"2019-10-15T15:10:33.000Z","comments":false,"path":"theme-sakura/index.html","permalink":"https://mokundong.cn/theme-sakura/index.html","excerpt":"","text":"Hexoä¸»é¢˜Sakuraä¿®æ”¹è‡ªWordPressä¸»é¢˜Sakuraï¼Œæ„Ÿè°¢åŸä½œè€…Mashiro","keywords":"Hexo ä¸»é¢˜ Sakura ğŸŒ¸"},{"title":"video","date":"2018-12-20T15:14:38.000Z","updated":"2019-10-15T15:10:33.000Z","comments":false,"path":"video/index.html","permalink":"https://mokundong.cn/video/index.html","excerpt":"","text":"var videos = [ { img: 'https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg', title: 'æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ±', status: 'å·²è¿½å®Œ', progress: 100, jp: 'ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã†', time: 'æ”¾é€æ—¶é—´: 2018-02-24 SUN.', desc: ' ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚' }, { img : 'https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg', title: 'æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ±', status: 'å·²è¿½å®Œ', progress: 100, jp: 'ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã†', time: '2018-02-24 SUN.', desc: ' ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚' } ] .should-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:95%;}.should-ellipsis-full{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;}.should-ellipsis i{position:absolute;right:24px;}.grey-text{color:#9e9e9e !important}.grey-text.text-darken-4{color:#212121 !important}html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}img{border-style:none}progress{display:inline-block;vertical-align:baseline}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{-webkit-box-sizing:border-box;box-sizing:border-box}*,*:before,*:after{-webkit-box-sizing:inherit;box-sizing:inherit}ul:not(.browser-default){padding-left:0;list-style-type:none}ul:not(.browser-default)>li{list-style-type:none}.card{-webkit-box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2);box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2)}.hoverable{-webkit-transition:-webkit-box-shadow .25s;transition:-webkit-box-shadow .25s;transition:box-shadow .25s;transition:box-shadow .25s,-webkit-box-shadow .25s}.hoverable:hover{-webkit-box-shadow:0 8px 17px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);box-shadow:0 8px 17px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)}i{line-height:inherit}i.right{float:right;margin-left:15px}.bangumi .right{float:right !important}.material-icons{text-rendering:optimizeLegibility;-webkit-font-feature-settings:'liga';-moz-font-feature-settings:'liga';font-feature-settings:'liga'}.row{margin-left:auto;margin-right:auto;margin-bottom:20px}.row:after{content:\"\";display:table;clear:both}.row .col{float:left;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 .75rem;min-height:1px}.row .col.s12{width:100%;margin-left:auto;left:auto;right:auto}@media only screen and (min-width:601px){.row .col.m6{width:50%;margin-left:auto;left:auto;right:auto}}html{line-height:1.5;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Oxygen-Sans,Ubuntu,Cantarell,\"Helvetica Neue\",sans-serif;font-weight:normal;color:rgba(0,0,0,0.87)}@media only screen and (min-width:0){html{font-size:14px}}@media only screen and (min-width:992px){html{font-size:14.5px}}@media only screen and (min-width:1200px){html{font-size:15px}}.card{position:relative;margin:.5rem 0 1rem 0;background-color:#fff;-webkit-transition:-webkit-box-shadow .25s;transition:-webkit-box-shadow .25s;transition:box-shadow .25s;transition:box-shadow .25s,-webkit-box-shadow .25s;border-radius:2px}.card .card-title{font-size:24px;font-weight:300}.card .card-title.activator{cursor:pointer}.card .card-image{position:relative}.card .card-image img{display:block;border-radius:2px 2px 0 0;position:relative;left:0;right:0;top:0;bottom:0;width:100%}.card .card-content{padding:24px;border-radius:0 0 2px 2px}.card .card-content p{margin:0}.card .card-content .card-title{display:block;line-height:32px;margin-bottom:8px}.card .card-content .card-title i{line-height:32px}.card .card-reveal{padding:24px;position:absolute;background-color:#fff;width:100%;overflow-y:auto;left:0;top:100%;height:100%;z-index:3;display:none}.card .card-reveal .card-title{cursor:pointer;display:block}.waves-effect{position:relative;cursor:pointer;display:inline-block;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;vertical-align:middle;z-index:1;-webkit-transition:.3s ease-out;transition:.3s ease-out}.waves-effect img{position:relative;z-index:-1}.waves-block{display:block}::-webkit-input-placeholder{color:#d1d1d1}::-moz-placeholder{color:#d1d1d1}:-ms-input-placeholder{color:#d1d1d1}::-ms-input-placeholder{color:#d1d1d1}[type=\"radio\"]:not(:checked){position:absolute;opacity:0;pointer-events:none}[type=\"radio\"]:not(:checked)+span{position:relative;padding-left:35px;cursor:pointer;display:inline-block;height:25px;line-height:25px;font-size:1rem;-webkit-transition:.28s ease;transition:.28s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[type=\"radio\"]:not(:checked)+span:before,[type=\"radio\"]:not(:checked)+span:after{border-radius:50%}[type=\"radio\"]:not(:checked)+span:before,[type=\"radio\"]:not(:checked)+span:after{border:2px solid #5a5a5a}[type=\"radio\"]:not(:checked)+span:after{-webkit-transform:scale(0);transform:scale(0)}[type=\"checkbox\"]:not(:checked){position:absolute;opacity:0;pointer-events:none}[type=\"checkbox\"]:not(:checked):disabled+span:not(.lever):before{border:none;background-color:rgba(0,0,0,0.42)}[type=\"checkbox\"].filled-in:not(:checked)+span:not(.lever):before{width:0;height:0;border:3px solid transparent;left:6px;top:10px;-webkit-transform:rotateZ(37deg);transform:rotateZ(37deg);-webkit-transform-origin:100% 100%;transform-origin:100% 100%}[type=\"checkbox\"].filled-in:not(:checked)+span:not(.lever):after{height:20px;width:20px;background-color:transparent;border:2px solid #5a5a5a;top:0px;z-index:0}input[type=checkbox]:not(:disabled) ~ .lever:active:before,input[type=checkbox]:not(:disabled).tabbed:focus ~ .lever::before{-webkit-transform:scale(2.4);transform:scale(2.4);background-color:rgba(0,0,0,0.08)}input[type=range].focused:focus:not(.active)::-webkit-slider-thumb{-webkit-box-shadow:0 0 0 10px rgba(38,166,154,0.26);box-shadow:0 0 0 10px rgba(38,166,154,0.26)}input[type=range].focused:focus:not(.active)::-moz-range-thumb{box-shadow:0 0 0 10px rgba(38,166,154,0.26)}input[type=range].focused:focus:not(.active)::-ms-thumb{box-shadow:0 0 0 10px rgba(38,166,154,0.26)} ç•ªç»„è®¡åˆ’ è¿™é‡Œå°†æ˜¯æ°¸è¿œçš„å›å¿† window.onload = function(){ videos.forEach(function(video, i){ $('#rootRow').append(` ${video.title} ${video.jp} ${video.status} ${video.title} ${video.jp} æ”¾é€æ—¶é—´: ${video.time} ${video.desc} ${video.status} `) }) }","keywords":"Bç«™"}],"posts":[{"title":"flaskéƒ¨ç½²æ·±åº¦å­¦ä¹ æ¨¡å‹","slug":"python-flask-deeplearing-service","date":"2019-10-25T08:44:39.000Z","updated":"2019-10-25T09:25:16.251Z","comments":true,"path":"python-flask-deeplearing-service/","link":"","permalink":"https://mokundong.cn/python-flask-deeplearing-service/","excerpt":"","text":"ä½œä¸ºè‘—åPython webæ¡†æ¶ä¹‹ä¸€çš„Flaskï¼Œå…·æœ‰ç®€å•è½»é‡ã€çµæ´»ã€æ‰©å±•ä¸°å¯Œä¸”ä¸Šæ‰‹éš¾åº¦ä½çš„ç‰¹ç‚¹ï¼Œå› æ­¤æˆä¸ºäº†æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ æ¨¡å‹ä¸Šçº¿è·‘å®šæ—¶ä»»åŠ¡ï¼Œæä¾›APIçš„é¦–é€‰æ¡†æ¶ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼ŒFlaské»˜è®¤ä¸æ”¯æŒéé˜»å¡IOçš„ï¼Œå½“è¯·æ±‚Aè¿˜æœªå®Œæˆæ—¶å€™ï¼Œè¯·æ±‚Béœ€è¦ç­‰å¾…è¯·æ±‚Aå®Œæˆåæ‰èƒ½è¢«å¤„ç†ï¼Œæ‰€ä»¥æ•ˆç‡éå¸¸ä½ã€‚ä½†æ˜¯çº¿ä¸Šä»»åŠ¡é€šå¸¸éœ€è¦å¼‚æ­¥ã€é«˜å¹¶å‘ç­‰éœ€æ±‚ï¼Œæœ¬æ–‡æ€»ç»“ä¸€äº›åœ¨æ—¥å¸¸ä½¿ç”¨è¿‡ç¨‹ä¸­æ‰€å¸¸ç”¨çš„æŠ€å·§ã€‚ ä¸€ã€å‰æ²¿ å¼‚æ­¥å’Œå¤šçº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå…¶å®ï¼Œå¼‚æ­¥æ˜¯ç›®çš„ï¼Œè€Œå¤šçº¿ç¨‹æ˜¯å®ç°è¿™ä¸ªç›®çš„çš„æ–¹æ³•ã€‚å¼‚æ­¥æ˜¯è¯´ï¼ŒAå‘èµ·ä¸€ä¸ªæ“ä½œåï¼ˆä¸€èˆ¬éƒ½æ˜¯æ¯”è¾ƒè€—æ—¶çš„æ“ä½œï¼Œå¦‚æœä¸è€—æ—¶çš„æ“ä½œå°±æ²¡æœ‰å¿…è¦å¼‚æ­¥äº†ï¼‰ï¼Œå¯ä»¥ç»§ç»­è‡ªé¡¾è‡ªçš„å¤„ç†å®ƒè‡ªå·±çš„äº‹å„¿ï¼Œä¸ç”¨å¹²ç­‰ç€è¿™ä¸ªè€—æ—¶æ“ä½œè¿”å›ã€‚å®ç°å¼‚æ­¥å¯ä»¥é‡‡ç”¨å¤šçº¿ç¨‹æŠ€æœ¯æˆ–åˆ™äº¤ç»™å¦å¤–çš„è¿›ç¨‹æ¥å¤„ç†,è¯¦è§£å¸¸è§è¿™é‡Œã€‚ äºŒã€å®ç°æ–¹æ³• Flaskå¯åŠ¨è‡ªå¸¦æ–¹æ³• é‡‡ç”¨gunicornéƒ¨ç½² 1ã€Flaskä¸­è‡ªå¸¦æ–¹æ³•å®ç° run.py #!/usr/bin/env python # -*- coding: utf-8 -*- # @Time : 2018-12-01 16:37 # @Author : mokundong from flask import Flask import socket from time import sleep myhost = socket.gethostbyname(socket.gethostname()) app = Flask(__name__) @app.route('/job1') def some_long_task1(): print(\"Task #1 started!\") sleep(10) print(\"Task #1 is done!\") @app.route('/job2') def some_long_task2(arg1, arg2): print(\"Task #2 started with args: %s %s!\" % (arg1, arg2)) sleep(5) print(\"Task #2 is done!\") if __name__ == '__main__': app.run(host=myhost,port=5000,threaded=True) app.run(host=xxx,port=xx,threaded=True)ä¸­threadedå¼€å¯ååˆ™ä¸éœ€è¦ç­‰é˜Ÿåˆ—ã€‚ 2ã€gunicornéƒ¨ç½² Gunicorn æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„Python WSGI Server,é€šå¸¸ç”¨å®ƒæ¥è¿è¡Œ wsgi application æˆ–è€… wsgi framework(å¦‚Django,Paster,Flask),åœ°ä½ç›¸å½“äºJavaä¸­çš„Tomcatã€‚gunicorn ä¼šå¯åŠ¨ä¸€ç»„ workerè¿›ç¨‹ï¼Œæ‰€æœ‰workerè¿›ç¨‹å…¬ç”¨ä¸€ç»„listenerï¼Œåœ¨æ¯ä¸ªworkerä¸­ä¸ºæ¯ä¸ªlistenerå»ºç«‹ä¸€ä¸ªwsgi serverã€‚æ¯å½“æœ‰HTTPé“¾æ¥åˆ°æ¥æ—¶ï¼Œwsgi serveråˆ›å»ºä¸€ä¸ªåç¨‹æ¥å¤„ç†è¯¥é“¾æ¥ï¼Œåç¨‹å¤„ç†è¯¥é“¾æ¥çš„æ—¶å€™ï¼Œå…ˆåˆå§‹åŒ–WSGIç¯å¢ƒï¼Œç„¶åè°ƒç”¨ç”¨æˆ·æä¾›çš„appå¯¹è±¡å»å¤„ç†HTTPè¯·æ±‚ã€‚å…³äºgunicornçš„è¯¦ç»†è¯´æ˜ï¼Œå¯ä»¥å‚è€ƒè¿™é‡Œã€‚ ä½¿ç”¨å‘½ä»¤è¡Œå¯åŠ¨gunicornæœ‰ä¸¤ç§æ–¹å¼è·å–é…ç½®é¡¹ï¼Œä¸€ç§æ˜¯åœ¨å‘½ä»¤è¡Œé…ç½®ï¼Œä¸€ç§æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­è·å–ã€‚ run.py #!/usr/bin/env python # -*- coding: utf-8 -*- # @Time : 2018-12-01 17:00 # @Author : mokundong from flask import Flask from time import sleep app = Flask(__name__) @app.route('/job1') def some_long_task1(): print(\"Task #1 started!\") sleep(10) print(\"Task #1 is done!\") @app.route('/job2') def some_long_task2(arg1, arg2): print(\"Task #2 started with args: %s %s!\" % (arg1, arg2)) sleep(5) print(\"Task #2 is done!\") if __name__ == '__main__': app.run() å‘½ä»¤è¡Œé…ç½®gunicorn --workers=4 --bind=127.0.0.1:8000 run:app æ›´å¤šé…ç½®è§å®˜ç½‘ é…ç½®æ–‡ä»¶è·å–é…ç½® gunicorn_config.py #!/usr/bin/env python # -*- coding: utf-8 -*- # @Time : 2018-12-01 17:10 # @Author : mokundong import os import socket import multiprocessing import gevent.monkey gevent.monkey.patch_all() myhost = socket.gethostbyname(socket.gethostname()) debug = False loglevel = 'info' hosts = get_host_ip() bind = hosts+\":5000\" timeout = 30 #è¶…æ—¶ pidfile = \"log/gunicorn.pid\" accesslog = \"log/access.log\" errorlog = \"log/debug.log\" daemon = True #æ„å‘³ç€å¼€å¯åå°è¿è¡Œï¼Œé»˜è®¤ä¸ºFalse workers = 4 # å¯åŠ¨çš„è¿›ç¨‹æ•° threads = 2 #æŒ‡å®šæ¯ä¸ªè¿›ç¨‹å¼€å¯çš„çº¿ç¨‹æ•° worker_class = 'gevent' #é»˜è®¤ä¸ºsyncæ¨¡å¼ï¼Œä¹Ÿå¯ä½¿ç”¨geventæ¨¡å¼ã€‚ x_forwarded_for_header = 'X-FORWARDED-FOR' å¯åŠ¨å‘½ä»¤å¦‚ä¸‹ gunicorn -c gunicorn_config.py run:app ä¸‰ã€è¡¥å……1ã€å…³äºçº¿ç¨‹çš„è¡¥å…… åœ¨å·¥ä½œä¸­æˆ‘è¿˜é‡åˆ°ä¸€ç§æƒ…å†µï¼Œå½“ä¸€ä¸ªè¯·æ±‚è¿‡æ¥åï¼Œæˆ‘éœ€è¦ä¸¤ç§å›åº”ï¼Œä¸€ä¸ªæ˜¯åŠæ—¶è¿”å›appè¿è¡Œç»“æœï¼Œç¬¬äºŒä¸ªå“åº”æ˜¯ä¿å­˜æ•°æ®åˆ°æ—¥å¿—æˆ–è€…æ•°æ®åº“ã€‚å¾€å¾€æˆ‘ä»¬åœ¨å†™æ•°æ®çš„è¿‡ç¨‹ä¸­ä¼šèŠ±é”€ä¸€å®šçš„æ—¶é—´ï¼Œå¯¼è‡´ç»“æœè¿”å›ä¼šæœ‰æ‰€å»¶è¿Ÿï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ç”¨ä¸¤ä¸ªçº¿ç¨‹å¤„ç†è¿™ä¸¤ä¸ªä»»åŠ¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä¸‹å¤„ç†ã€‚ run.py #!/usr/bin/env python # -*- coding: utf-8 -*- # @Time : 2018-12-01 17:20 # @Author : mokundong from flask import Flask,request from time import sleep from concurrent.futures import ThreadPoolExecutor executor = ThreadPoolExecutor(2) app = Flask(__name__) @app.route('/job') def run_jobs(): executor.submit(some_long_task1) executor.submit(some_long_task2, 'hello', 123) return 'Two jobs was launched in background!' def some_long_task1(): print(\"Task #1 started!\") sleep(10) print(\"Task #1 is done!\") def some_long_task2(arg1, arg2): print(\"Task #2 started with args: %s %s!\" % (arg1, arg2)) sleep(5) print(\"Task #2 is done!\") if __name__ == '__main__': app.run() 2ã€å…³äºè·å–IPçš„è¡¥å…… ä¸Šè¿°ä»£ç ä¸­é€šè¿‡è·å–hostnameï¼Œç„¶åå†é€šè¿‡hostnameåæŸ¥å¤„æœºå™¨çš„IPã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ä¸æ¨èçš„ã€‚å› ä¸ºå¾ˆå¤šçš„æœºå™¨æ²¡æœ‰è§„èŒƒè¿™ä¸ªhostnameçš„è®¾ç½®ã€‚å¦å¤–å°±æ˜¯æœ‰äº›æœåŠ¡å™¨ä¼šåœ¨ /etc/hosts ä¸­æ·»åŠ æœ¬æœºçš„hostnameçš„åœ°å€ï¼Œè¿™ä¸ªåšæ³•ä¹Ÿä¸æ˜¯ä¸å¯ä»¥ï¼Œä½†æ˜¯å¦‚æœè®¾ç½®æˆäº† 127.0.0.1ï¼Œé‚£ä¹ˆè·å–å‡ºæ¥çš„IPå°±éƒ½æ˜¯è¿™ä¸ªåœ°å€äº†ã€‚è¿™é‡Œç»™å‡ºä¸€ç§ä¼˜é›…çš„æ–¹å¼è·å–IPï¼Œåˆ©ç”¨ UDP åè®®æ¥å®ç°çš„ï¼Œç”Ÿæˆä¸€ä¸ªUDPåŒ…ï¼ŒæŠŠè‡ªå·±çš„ IP æ”¾å¦‚åˆ° UDP åè®®å¤´ä¸­ï¼Œç„¶åä»UDPåŒ…ä¸­è·å–æœ¬æœºçš„IPã€‚ #!/usr/bin/env python # -*- coding: utf-8 -*- # @Time : 2018-12-01 17:30 # @Author : mokundong # å¯ä»¥å°è£…æˆå‡½æ•°ï¼Œæ–¹ä¾¿ Python çš„ç¨‹åºè°ƒç”¨ import socket def get_host_ip(): try: s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) s.connect(('8.8.8.8', 80)) ip = s.getsockname()[0] finally: s.close() return ip æ€»ç»“å½“ç„¶æ¨èä½¿ç”¨gunicornéƒ¨ç½²å¤šçº¿ç¨‹ï¼ŒFlaskè‡ªå¸¦çš„ï¼Œemmmmï¼Œæµ‹è¯•ç©å„¿ç©å„¿å§ã€‚åœ¨å†™ä½œè¿‡ç¨‹ä¸­æ‰å‘ç°è‡ªå·±çŸ¥è¯†æ¼æ´ä¸æ˜¯ä¸€èˆ¬å¤šï¼Œå…±å‹‰ï¼","categories":[{"name":"python","slug":"python","permalink":"https://mokundong.cn/categories/python/"},{"name":"flask","slug":"python/flask","permalink":"https://mokundong.cn/categories/python/flask/"}],"tags":[],"keywords":[{"name":"python","slug":"python","permalink":"https://mokundong.cn/categories/python/"},{"name":"flask","slug":"python/flask","permalink":"https://mokundong.cn/categories/python/flask/"}]},{"title":"Summary-2018-12","slug":"chat-Summary-2018","date":"2018-12-30T09:44:00.000Z","updated":"2019-10-25T09:45:32.696Z","comments":true,"path":"chat-Summary-2018/","link":"","permalink":"https://mokundong.cn/chat-Summary-2018/","excerpt":"","text":"2018å¹´å¯è°“äººç”Ÿä¸€å¤§è½¬æŠ˜ç‚¹ï¼Œè¿™å¹´ä¸­ç»“æŸäº†é•¿è¾¾äºŒåå¹´çš„æ±‚å­¦ç”Ÿæ¶¯æ‘‡èº«ä¸€å˜å°±è¦ä¸¤è‚©æ‰›ç –ï¼Œä¸ºä¸€å£åƒå–è€Œå¥”æ³¢ã€‚å‰åŠå¹´å¿™è®ºæ–‡å¿™ç­”è¾©é™¤äº†å¿™ç¢Œè¿˜æ˜¯å¿™ç¢Œï¼Œä¸è¿‡å¿ƒæƒ…è¿˜æ˜¯æå¥½çš„ï¼Œæ¯•ç«Ÿå¯¹é¢é•¿è¾¾ä¸‰å¹´èº«å¿ƒæŠ˜ç£¨çš„ç»“æŸè¿˜æ˜¯å¾ˆæœŸå¾…çš„ï¼›å¿˜è®°ä¸å­¦æ ¡åˆ†æ‰‹çš„ç¬¬å‡ å¤©èµ·ï¼Œå–œæ¬¢ä¸€ä¸ªäººâ€¦å•Šï¼Œå‘¸ï¼Œä»ä¸ƒæœˆçš„ç¬¬ä¸€ä¸ªæ—¥å‡ºé‚£å¤©èµ·å…¥èŒåŸ¹è®­è¿‡æ¸¡åˆ°é¡¹ç›®ï¼Œæ¸æ¸å¼€å§‹èå…¥ä¸‡åƒäº’è”ç½‘å†œæ°‘å·¥çš„å¤§å†›ä¸­ã€‚ ä¸€ã€æº å…¶å®æ˜¨å¤©æ™šä¸Šæˆ‘å°±åœ¨æƒ³æˆ‘æ˜¯ä¸æ˜¯ä¹Ÿè¦è·Ÿä¸ªä¿—ï¼Œå†™ä¸€ä¸ªå¹´åº¦æ€»ç»“ï¼Œçº ç»“äº†å¾ˆä¹…æœ€ç»ˆè¿˜æ˜¯æƒ³ç€è¿™é‡è¦çš„ä¸€å¹´è¿˜æ˜¯è¦ç•™ä¸‹ç‚¹ä»€ä¹ˆå§ã€‚æˆ‘æƒ³å†™å†™å·¥ä½œå§ï¼Œå­¦æ ¡ç•™ä¸‹çš„ï¼Œå¤§æ¦‚ä¹Ÿåªæœ‰å¸ˆå…„å§å¼Ÿå¦¹ä¹‹é—´çš„ä¸€äº›ä¸œè¥¿äº†ã€‚ äºŒã€å…³äºå·¥ä½œ å½“åˆè¿˜æ˜¯æœ‰é‚£ä¹ˆå‡ ä¸ªå·¥ä½œæœºä¼šæ‘†åœ¨æˆ‘é¢é¢å‰çš„ï¼Œå¯¹äºæœ€åçš„é€‰æ‹©æˆ‘è¿˜æ˜¯æ»¡æ„çš„ï¼Œä¸€æ¥æˆ‘æ¯”è¾ƒå–œæ¬¢ç°åœ¨ç»„å†…çš„å·¥ä½œæ°›å›´ï¼Œå¤§å®¶éƒ½æ¯”è¾ƒç…§é¡¾æˆ‘ï¼›äºŒæ˜¯èƒ½å¤Ÿåšæˆ‘å–œæ¬¢åšçš„äº‹æƒ…ï¼Œä¹Ÿèƒ½å­¦åˆ°å¾ˆå¤šä¸œè¥¿ï¼›æœ€åä¹Ÿèƒ½ç¦»å®¶å¾ˆè¿‘ï¼Œæœ‰å¾ˆå¤šç†Ÿæ‚‰çš„æœ‹å‹éƒ½è¿˜åœ¨ã€‚ å­¦ä¹  åˆšå…¥èŒåœºçš„æ–°äººï¼Œå­¦ä¹ æ€»æ˜¯é‡è¦çš„ç¯èŠ‚ï¼Œä¸ç®¡æ˜¯ä¸“ä¸šçŸ¥è¯†ï¼Œå·¥ç¨‹èƒ½åŠ›è¿˜æ˜¯é¡¹ç›®æ²Ÿé€šèƒ½åŠ›ç­‰ç­‰ã€‚ 1ã€åˆšè¿›å…¬å¸ï¼Œæˆ‘æ˜¯åœ¨æ•°æ®ç§‘å­¦å›¢é˜Ÿçš„ã€‚è¿™è¾¹ä¸»è¦åšä¸€äº›ç ”ç©¶æ€§è´¨çš„äº‹æƒ…ï¼Œè¿™æ®µæ—¶é—´æˆ‘çš„é‡å¿ƒä¸»è¦æ˜¯ä¸€äº›ç†è®ºå­¦ä¹ ã€‚å¼€å§‹æˆ‘æ²¡æœ‰æƒ³åˆ°è¿™è¾¹ä¸»è¦åšçš„æ˜¯nlpä¸€ç±»çš„é¡¹ç›®ï¼Œè€Œæˆ‘åœ¨è¿™ä¸€å—ç®—æ˜¯æ¯”è¾ƒæ¬ ç¼ºçš„ï¼ˆæ¯•ç«Ÿæˆ‘æ˜¯ä¸€ä¸ªå­¦ç‰©ç†çš„ï¼Œæ‰¾å·¥ä½œçš„æ—¶å€™åˆçœ‹å¾—æ¯”è¾ƒæ‚ï¼Œå¹¿è€Œä¸ç²¾ï¼‰ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™çš„åœ¨çœ‹è®ºæ–‡ã€çœ‹ä»£ç ã€é€›æŠ€æœ¯åšå®¢ï¼Œé‚£æ®µç‰¹åˆ«æ„Ÿè°¢èµµxxå“¥å’Œæœ±xå…„å¸¦æˆ‘ã€‚åæ¥DSå›¢é˜Ÿåˆå¹¶åˆ°æœç´¢æ¨èç»„äº†ï¼Œèµµå“¥ä¹Ÿèµ°äº†ã€‚ 2ã€è¯´å®è¯åˆšåˆ°æœç´¢è¿™è¾¹çš„æ—¶å€™ï¼Œæˆ‘è¿˜æ˜¯æ¯”è¾ƒæ‹…å¿ƒçš„ï¼Œæ¯•ç«Ÿè¿™è¾¹å·¥ç¨‹ä¸Šçš„äº‹æƒ…å¾ˆå¤šï¼Œè€Œæˆ‘åœ¨è¿™ä¸€å—å¯èƒ½éœ€è¦è¡¥çš„ä¸œè¥¿æ›´å¤šï¼Œå¥½åœ¨è€å¤§å®¶æ—å“¥æ¯”è¾ƒç…§é¡¾æˆ‘ï¼Œè®©æˆ‘è¿˜æ˜¯ç»§ç»­åšä¹‹å‰çš„ä¸œè¥¿ï¼Œä¹Ÿæ€»æ˜¯æ›¿æˆ‘èƒŒé”…ã€‚ä½†ç ”ç©¶é¡¹ç›®ç»ˆç©¶éœ€è¦å·¥ç¨‹åŒ–åº”ç”¨æ‰èƒ½äº§ç”Ÿä»·å€¼ï¼Œè¿™æ®µæ—¶é—´éå¸¸æ„Ÿè°¢å‡¯å“¥ï¼Œæ€»æ˜¯å¾ˆè€å¿ƒçš„æŒ‡å¯¼æˆ‘ä¸€äº›å·¥ç¨‹ä¸Šçš„æµç¨‹å’Œç»†èŠ‚ï¼Œæ€»ä½“è¿‡å¾—ä¹Ÿç®—é¡ºåˆ©ã€‚åæ¥æœ±å…„å’Œå‡¯å“¥ä¹Ÿèµ°äº†ã€‚ 3ã€é‚£æ®µæ—¶é—´èµ°äº†å¥½å¤šäººï¼Œåœ¨å­¦æ ¡ä¹ æƒ¯äº†èº«è¾¹æ€»æ˜¯é‚£äº›ç†Ÿæ‚‰çš„é¢å­”ï¼Œçªç„¶å¾ˆä¸é€‚åº”è¿™ç§çŠ¶å†µï¼Œä½†åæ¥æ…¢æ…¢çš„ä¹Ÿä¹ æƒ¯äº†ã€‚ æ”¶è· æ—¢ç„¶æœ‰å­¦ä¹ ï¼Œå½“ç„¶å°±æœ‰æ”¶è·çš„å•¦ã€‚è¿™åŠå¹´æˆ‘åšçš„ä¸€ä¸ªä¸»è¦é¡¹ç›®æ˜¯ä¸€ä¸ªä¸æ–‡æœ¬åˆ†ç±»ç›¸å…³çš„äº‹æƒ…ã€‚é¡¹ç›®ä»ç ”ç©¶ã€é€‰æ¨¡å‹åˆ°è½åœ°åº”ç”¨æŒç»­äº†å¥½å‡ ä¸ªæœˆï¼Œä¸åŠ å·å¤§å­¦æŸåˆ†æ ¡æœ‰åˆä½œã€‚ 1ã€åœ¨è¿™ä¸ªé¡¹ç›®è¿‡ç¨‹ä¸­ï¼Œç†è®ºä¸Šå­¦ä¹ åˆ°äº†æ¯”è¾ƒå¤šçš„å†…å®¹ï¼Œä»CNNåˆ°Transformçš„ç‰¹å¾æå–æ–¹å¼ï¼Œä»word embedingåˆ°BERTæ¡†æ¶çš„é¢„è®­ç»ƒæ¡†æ¶å‡æœ‰æ‰€è¿›ä¸€æ­¥è®¤è¯†ã€‚ 2ã€ 3ã€é¡¹ç›®æ–¹æ²Ÿé€šè¿‡ç¨‹ä¸­ï¼ŒåŠ å¼ºäº†ä¸ä¸šåŠ¡æ–¹çš„æ²Ÿé€šèƒ½åŠ›ï¼Œäº†è§£ä¸šåŠ¡å¯¹æ¨¡å‹ï¼Œå¯¹å·¥ç¨‹çš„å½±å“ã€‚ 4ã€æœ€ç»ˆï¼Œæ¨¡å‹æˆåŠŸåº”ç”¨äºé‡è¦ç¯èŠ‚ï¼Œåœ¨æ•ˆæœä¸Šç›¸æ¯”åŠ å·å¤§å­¦æé«˜äº†ä¸€å€ï¼Œè¿™ä¸€ç‚¹æˆ‘è¿˜æ˜¯å¾ˆæ»¡æ„çš„ã€‚ ä¸è¶³ è‡ªèº«çš„ä¸è¶³è¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œç‰¹åˆ«æ˜¯ä»¥åæ¥è§¦æ›´å¤šçš„é¡¹ç›®ï¼Œæ¬ ä¸‹çš„ä¸œè¥¿ä¼šè¶Šå‘çš„å‡¸æ˜¾å‡ºæ¥ã€‚ 1ã€Javaå¿˜è®°å¾—å·®ä¸å¤šäº†ï¼Œå¾ˆå¤šå·¥ç¨‹ä¸Šçš„ä¸œè¥¿è¿˜æ²¡å­¦ã€‚ 2ã€å¾ˆå¤šåŸºç¡€ç®—æ³•çš„æ¨å¯¼ä¹Ÿæ¸æ¸æ¨¡ç³Šäº†ã€‚ 3ã€èº«ä¸Šçš„è‚‰ï¼Œå—¯ï¼Œå¥½åƒè¿˜æ˜¯é‚£ä¹ˆå¤šã€‚ ä¸‰ã€å†™åœ¨æœ€å è¿™ä¸€å¹´ï¼Œå‡†ç¡®è¯´æ˜¯åŠå¹´å¤§æ¦‚å°±æ˜¯è¿™ä¹ˆä¸ªæƒ…å†µï¼Œæœ‰æ‰€è·æœ‰æ¬ ç¼ºï¼Œæ¥å¹´ç»§ç»­åŠªåŠ›ï¼ŒæŸ¥æ¼è¡¥ç¼ºã€‚ç›®å‰è¡Œä¸šçš„å‘å±•æœ‰è¿™ä¹ˆä¸€ä¸ªæ®µå­ï¼šâ€œ2019å¹´å¯èƒ½ä¼šæ˜¯è¿‡å»åå¹´é‡Œæœ€å·®çš„ä¸€å¹´ï¼Œä½†å´æ˜¯æœªæ¥åå¹´é‡Œæœ€å¥½çš„ä¸€å¹´â€ã€‚é©å‘½å°šæœªç»“æŸï¼ŒåŒå¿—ä»éœ€åŠªåŠ›ï¼Œè¯¸å›å…±å‹‰ï¼ï¼ 2018.12.31 è«å¤ä¸œ","categories":[{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"https://mokundong.cn/categories/æ‚è°ˆ/"}],"tags":[],"keywords":[{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"https://mokundong.cn/categories/æ‚è°ˆ/"}]},{"title":"keras-test","slug":"python-keras-test","date":"2018-12-12T14:16:01.000Z","updated":"2019-10-25T09:25:11.073Z","comments":true,"path":"python-keras-test/","link":"","permalink":"https://mokundong.cn/python-keras-test/","excerpt":"","text":"12import tensorflow as tfimport tensorflow.keras as keras","categories":[{"name":"python","slug":"python","permalink":"https://mokundong.cn/categories/python/"},{"name":"keras","slug":"python/keras","permalink":"https://mokundong.cn/categories/python/keras/"}],"tags":[],"keywords":[{"name":"python","slug":"python","permalink":"https://mokundong.cn/categories/python/"},{"name":"keras","slug":"python/keras","permalink":"https://mokundong.cn/categories/python/keras/"}]}]}