<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[æ€ªå”å”çš„æ—¥è®°]]></title>
    <url>%2Fz_post%2Fmoods%2F</url>
    <content type="text"><![CDATA[2019-02-17 ä»Šå¤©å¾ˆå¼€å¿ƒ ðŸ˜‹ 2019-02-18 ä»Šå¤©å¹´ä¼šå•¥éƒ½æ²¡æžåˆ°ï¼Œä½†æ˜¯æƒ³æƒ³å¸¦è–ªçŽ©å„¿äº†ä¸€ä¸‹åˆè¿˜æ˜¯å¯ä»¥çš„å‘€ ðŸ˜› 2019-02-20 å—¨ï¼Œæˆ‘æƒ³ä½ äº†ï¼Œç‰¹åˆ«ç‰¹åˆ«æƒ³ï¼Œæˆ‘æƒ³æŠ±ç€ä½  ðŸŒ¹]]></content>
      <categories>
        <category>moods</category>
      </categories>
      <tags>
        <tag>moods</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—]]></title>
    <url>%2Fz_post%2Ftextsanddocs-filter%2F</url>
    <content type="text"><![CDATA[åœ¨ç½‘é¡µç‚¹å‡»ã€æŽ¨èç­‰ä¼—å¤šNLPä»»åŠ¡ä¸­ï¼Œå¸¸å¸¸éœ€è¦ç”¨åˆ°æ–‡æœ¬åŽ»é‡æˆ–è€…ç›¸ä¼¼è®¡ç®—ã€‚æœ¬æ–‡ä»‹ç»3ç§å¸¸ç”¨çš„æ–¹å¼ï¼šshinglingã€simhashå’Œbloom filterã€‚ ä¸€ã€shingling]]></content>
  </entry>
  <entry>
    <title><![CDATA[èµ„æºåˆ†äº«]]></title>
    <url>%2Fz_post%2Fdoc-recommend%2F</url>
    <content type="text"><![CDATA[æŽ¨èä¸¤ä»½å†™çš„æ¯”è¾ƒå¥½çš„å…³äºŽHMM(éšé©¬å°”å¯å¤«é“¾)å’ŒLDAçš„PDFèµ„æ–™ï¼ŒåŽç»­èµ„æ–™æŒç»­æ›´æ–° 1ã€ç‚¹å‡»ä¸‹è½½HMMå­¦ä¹ æœ€ä½³èŒƒä¾‹ 2ã€ç‚¹å‡»ä¸‹è½½LDAæ•°å­¦å…«å¦ 3ã€ç‚¹å‡»ä¸‹è½½2018DataFunæŠ€æœ¯åˆ†äº«åˆé›† 4ã€ç‚¹å‡»ä¸‹è½½2018é˜¿é‡Œå·´å·´-æ•°å­—ç»æµŽä¸‹çš„ç®—æ³•åŠ›é‡ 5ã€ç‚¹å‡»ä¸‹è½½2018ç¾Žå›¢ç‚¹è¯„æŠ€æœ¯å¹´è´§aiç¯‡ 6ã€ç‚¹å‡»ä¸‹è½½2018æºç¨‹æŠ€æœ¯å¹´åº¦åˆè¾‘ 7ã€ç‚¹å‡»ä¸‹è½½å¾®è½¯äºšæ´²ç ”ç©¶é™¢åˆ˜é“å²©åšå£«ã€Šlearning to rank for information retrievalã€‹ 8ã€ä»Šæ—¥æŽ¨èæŽ’åºç®—æ³•ç»å…¸æ•™æï¼Œå¾®è½¯äºšæ´²ç ”ç©¶é™¢çš„åˆ˜é“å²©åšå£«çš„ã€Šlearning to rank for information retrivalã€‹éšä¾¿æŽ¨èlambdaMARTç›¸å…³çš„åšå®¢ï¼šlambdaMARTåŽŸç†ä»¥åŠranklibæºç è§£æž]]></content>
      <categories>
        <category>docs</category>
      </categories>
      <tags>
        <tag>docs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[What I have done this year]]></title>
    <url>%2Fz_post%2Fannua-summary%2F</url>
    <content type="text"><![CDATA[2018å¹´å¯è°“äººç”Ÿä¸€å¤§è½¬æŠ˜ç‚¹ï¼Œè¿™å¹´ä¸­ç»“æŸäº†é•¿è¾¾äºŒåå¹´çš„æ±‚å­¦ç”Ÿæ¶¯æ‘‡èº«ä¸€å˜å°±è¦ä¸¤è‚©æ‰›ç –ï¼Œä¸ºä¸€å£åƒå–è€Œå¥”æ³¢ã€‚å‰åŠå¹´å¿™è®ºæ–‡å¿™ç­”è¾©é™¤äº†å¿™ç¢Œè¿˜æ˜¯å¿™ç¢Œï¼Œä¸è¿‡å¿ƒæƒ…è¿˜æ˜¯æžå¥½çš„ï¼Œæ¯•ç«Ÿå¯¹é¢é•¿è¾¾ä¸‰å¹´èº«å¿ƒæŠ˜ç£¨çš„ç»“æŸè¿˜æ˜¯å¾ˆæœŸå¾…çš„ï¼›å¿˜è®°ä¸Žå­¦æ ¡åˆ†æ‰‹çš„ç¬¬å‡ å¤©èµ·ï¼Œå–œæ¬¢ä¸€ä¸ªäººâ€¦å•Šï¼Œå‘¸ï¼Œä»Žä¸ƒæœˆçš„ç¬¬ä¸€ä¸ªæ—¥å‡ºé‚£å¤©èµ·å…¥èŒåŸ¹è®­è¿‡æ¸¡åˆ°é¡¹ç›®ï¼Œæ¸æ¸å¼€å§‹èžå…¥ä¸‡åƒäº’è”ç½‘å†œæ°‘å·¥çš„å¤§å†›ä¸­ã€‚ ä¸€ã€æº å…¶å®žæ˜¨å¤©æ™šä¸Šæˆ‘å°±åœ¨æƒ³æˆ‘æ˜¯ä¸æ˜¯ä¹Ÿè¦è·Ÿä¸ªä¿—ï¼Œå†™ä¸€ä¸ªå¹´åº¦æ€»ç»“ï¼Œçº ç»“äº†å¾ˆä¹…æœ€ç»ˆè¿˜æ˜¯æƒ³ç€è¿™é‡è¦çš„ä¸€å¹´è¿˜æ˜¯è¦ç•™ä¸‹ç‚¹ä»€ä¹ˆå§ã€‚æˆ‘æƒ³å†™å†™å·¥ä½œå§ï¼Œå­¦æ ¡ç•™ä¸‹çš„ï¼Œå¤§æ¦‚ä¹Ÿåªæœ‰å¸ˆå…„å§å¼Ÿå¦¹ä¹‹é—´çš„ä¸€äº›ä¸œè¥¿äº†ã€‚ äºŒã€å…³äºŽå·¥ä½œ å½“åˆè¿˜æ˜¯æœ‰é‚£ä¹ˆå‡ ä¸ªå·¥ä½œæœºä¼šæ‘†åœ¨æˆ‘é¢é¢å‰çš„ï¼Œå¯¹äºŽæœ€åŽçš„é€‰æ‹©æˆ‘è¿˜æ˜¯æ»¡æ„çš„ï¼Œä¸€æ¥æˆ‘æ¯”è¾ƒå–œæ¬¢çŽ°åœ¨ç»„å†…çš„å·¥ä½œæ°›å›´ï¼Œå¤§å®¶éƒ½æ¯”è¾ƒç…§é¡¾æˆ‘ï¼›äºŒæ˜¯èƒ½å¤Ÿåšæˆ‘å–œæ¬¢åšçš„äº‹æƒ…ï¼Œä¹Ÿèƒ½å­¦åˆ°å¾ˆå¤šä¸œè¥¿ï¼›æœ€åŽä¹Ÿèƒ½ç¦»å®¶å¾ˆè¿‘ï¼Œæœ‰å¾ˆå¤šç†Ÿæ‚‰çš„æœ‹å‹éƒ½è¿˜åœ¨ã€‚ å­¦ä¹  åˆšå…¥èŒåœºçš„æ–°äººï¼Œå­¦ä¹ æ€»æ˜¯é‡è¦çš„çŽ¯èŠ‚ï¼Œä¸ç®¡æ˜¯ä¸“ä¸šçŸ¥è¯†ï¼Œå·¥ç¨‹èƒ½åŠ›è¿˜æ˜¯é¡¹ç›®æ²Ÿé€šèƒ½åŠ›ç­‰ç­‰ã€‚ 1ã€åˆšè¿›å…¬å¸ï¼Œæˆ‘æ˜¯åœ¨æ•°æ®ç§‘å­¦å›¢é˜Ÿçš„ã€‚è¿™è¾¹ä¸»è¦åšä¸€äº›ç ”ç©¶æ€§è´¨çš„äº‹æƒ…ï¼Œè¿™æ®µæ—¶é—´æˆ‘çš„é‡å¿ƒä¸»è¦æ˜¯ä¸€äº›ç†è®ºå­¦ä¹ ã€‚å¼€å§‹æˆ‘æ²¡æœ‰æƒ³åˆ°è¿™è¾¹ä¸»è¦åšçš„æ˜¯nlpä¸€ç±»çš„é¡¹ç›®ï¼Œè€Œæˆ‘åœ¨è¿™ä¸€å—ç®—æ˜¯æ¯”è¾ƒæ¬ ç¼ºçš„ï¼ˆæ¯•ç«Ÿæˆ‘æ˜¯ä¸€ä¸ªå­¦ç‰©ç†çš„ï¼Œæ‰¾å·¥ä½œçš„æ—¶å€™åˆçœ‹å¾—æ¯”è¾ƒæ‚ï¼Œå¹¿è€Œä¸ç²¾ï¼‰ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™çš„åœ¨çœ‹è®ºæ–‡ã€çœ‹ä»£ç ã€é€›æŠ€æœ¯åšå®¢ï¼Œé‚£æ®µç‰¹åˆ«æ„Ÿè°¢èµµxxå“¥å’Œæœ±xå…„å¸¦æˆ‘ã€‚åŽæ¥DSå›¢é˜Ÿåˆå¹¶åˆ°æœç´¢æŽ¨èç»„äº†ï¼Œèµµå“¥ä¹Ÿèµ°äº†ã€‚ 2ã€è¯´å®žè¯åˆšåˆ°æœç´¢è¿™è¾¹çš„æ—¶å€™ï¼Œæˆ‘è¿˜æ˜¯æ¯”è¾ƒæ‹…å¿ƒçš„ï¼Œæ¯•ç«Ÿè¿™è¾¹å·¥ç¨‹ä¸Šçš„äº‹æƒ…å¾ˆå¤šï¼Œè€Œæˆ‘åœ¨è¿™ä¸€å—å¯èƒ½éœ€è¦è¡¥çš„ä¸œè¥¿æ›´å¤šï¼Œå¥½åœ¨è€å¤§å®¶æž—å“¥æ¯”è¾ƒç…§é¡¾æˆ‘ï¼Œè®©æˆ‘è¿˜æ˜¯ç»§ç»­åšä¹‹å‰çš„ä¸œè¥¿ï¼Œä¹Ÿæ€»æ˜¯æ›¿æˆ‘èƒŒé”…ã€‚ä½†ç ”ç©¶é¡¹ç›®ç»ˆç©¶éœ€è¦å·¥ç¨‹åŒ–åº”ç”¨æ‰èƒ½äº§ç”Ÿä»·å€¼ï¼Œè¿™æ®µæ—¶é—´éžå¸¸æ„Ÿè°¢å‡¯å“¥ï¼Œæ€»æ˜¯å¾ˆè€å¿ƒçš„æŒ‡å¯¼æˆ‘ä¸€äº›å·¥ç¨‹ä¸Šçš„æµç¨‹å’Œç»†èŠ‚ï¼Œæ€»ä½“è¿‡å¾—ä¹Ÿç®—é¡ºåˆ©ã€‚åŽæ¥æœ±å…„å’Œå‡¯å“¥ä¹Ÿèµ°äº†ã€‚ 3ã€é‚£æ®µæ—¶é—´èµ°äº†å¥½å¤šäººï¼Œåœ¨å­¦æ ¡ä¹ æƒ¯äº†èº«è¾¹æ€»æ˜¯é‚£äº›ç†Ÿæ‚‰çš„é¢å­”ï¼Œçªç„¶å¾ˆä¸é€‚åº”è¿™ç§çŠ¶å†µï¼Œä½†åŽæ¥æ…¢æ…¢çš„ä¹Ÿä¹ æƒ¯äº†ã€‚ æ”¶èŽ· æ—¢ç„¶æœ‰å­¦ä¹ ï¼Œå½“ç„¶å°±æœ‰æ”¶èŽ·çš„å•¦ã€‚è¿™åŠå¹´æˆ‘åšçš„ä¸€ä¸ªä¸»è¦é¡¹ç›®æ˜¯ä¸€ä¸ªä¸Žæ–‡æœ¬åˆ†ç±»ç›¸å…³çš„äº‹æƒ…ã€‚é¡¹ç›®ä»Žç ”ç©¶ã€é€‰æ¨¡åž‹åˆ°è½åœ°åº”ç”¨æŒç»­äº†å¥½å‡ ä¸ªæœˆï¼Œä¸ŽåŠ å·žå¤§å­¦æŸåˆ†æ ¡æœ‰åˆä½œã€‚ 1ã€åœ¨è¿™ä¸ªé¡¹ç›®è¿‡ç¨‹ä¸­ï¼Œç†è®ºä¸Šå­¦ä¹ åˆ°äº†æ¯”è¾ƒå¤šçš„å†…å®¹ï¼Œä»ŽCNNåˆ°Transformçš„ç‰¹å¾æå–æ–¹å¼ï¼Œä»Žword embedingåˆ°BERTæ¡†æž¶çš„é¢„è®­ç»ƒæ¡†æž¶å‡æœ‰æ‰€è¿›ä¸€æ­¥è®¤è¯†ã€‚ 2ã€å·¥ç¨‹ä¸Šï¼ŒæˆåŠŸå°†åŸºäºŽPythonçš„æ·±åº¦å­¦ä¹ æ¨¡åž‹ç¬¬ä¸€æ¬¡ä¸Šçº¿ã€‚ä¸Šçº¿è¿‡ç¨‹ä¸­å­¦ä¹ äº†Flaskæ¡†æž¶ï¼›è§£å†³çº¿ä¸Šé—®é¢˜è¿‡ç¨‹ä¸­ï¼Œå­¦ä¹ å¹¶ä½¿ç”¨äº†å¼‚æ­¥ç­‰çŸ¥è¯†ï¼›å­¦ä¼šäº†å›¾æ•°æ®åº“neo4Jç­‰ç­‰ã€‚ 3ã€é¡¹ç›®æ–¹æ²Ÿé€šè¿‡ç¨‹ä¸­ï¼ŒåŠ å¼ºäº†ä¸Žä¸šåŠ¡æ–¹çš„æ²Ÿé€šèƒ½åŠ›ï¼Œäº†è§£ä¸šåŠ¡å¯¹æ¨¡åž‹ï¼Œå¯¹å·¥ç¨‹çš„å½±å“ã€‚ 4ã€æœ€ç»ˆï¼Œæ¨¡åž‹æˆåŠŸåº”ç”¨äºŽé‡è¦çŽ¯èŠ‚ï¼Œåœ¨æ•ˆæžœä¸Šç›¸æ¯”åŠ å·žå¤§å­¦æé«˜äº†ä¸€å€ï¼Œè¿™ä¸€ç‚¹æˆ‘è¿˜æ˜¯å¾ˆæ»¡æ„çš„ã€‚ ä¸è¶³ è‡ªèº«çš„ä¸è¶³è¿˜æ˜¯å¾ˆæ˜Žæ˜¾çš„ï¼Œç‰¹åˆ«æ˜¯ä»¥åŽæŽ¥è§¦æ›´å¤šçš„é¡¹ç›®ï¼Œæ¬ ä¸‹çš„ä¸œè¥¿ä¼šè¶Šå‘çš„å‡¸æ˜¾å‡ºæ¥ã€‚ 1ã€Javaå¿˜è®°å¾—å·®ä¸å¤šäº†ï¼Œå¾ˆå¤šå·¥ç¨‹ä¸Šçš„ä¸œè¥¿è¿˜æ²¡å­¦ã€‚ 2ã€å¾ˆå¤šåŸºç¡€ç®—æ³•çš„æŽ¨å¯¼ä¹Ÿæ¸æ¸æ¨¡ç³Šäº†ã€‚ 3ã€èº«ä¸Šçš„è‚‰ï¼Œå—¯ï¼Œå¥½åƒè¿˜æ˜¯é‚£ä¹ˆå¤šã€‚ ä¸‰ã€å†™åœ¨æœ€åŽ è¿™ä¸€å¹´ï¼Œå‡†ç¡®è¯´æ˜¯åŠå¹´å¤§æ¦‚å°±æ˜¯è¿™ä¹ˆä¸ªæƒ…å†µï¼Œæœ‰æ‰€èŽ·æœ‰æ¬ ç¼ºï¼Œæ¥å¹´ç»§ç»­åŠªåŠ›ï¼ŒæŸ¥æ¼è¡¥ç¼ºã€‚ç›®å‰è¡Œä¸šçš„å‘å±•æœ‰è¿™ä¹ˆä¸€ä¸ªæ®µå­ï¼šâ€œ2019å¹´å¯èƒ½ä¼šæ˜¯è¿‡åŽ»åå¹´é‡Œæœ€å·®çš„ä¸€å¹´ï¼Œä½†å´æ˜¯æœªæ¥åå¹´é‡Œæœ€å¥½çš„ä¸€å¹´â€ã€‚é©å‘½å°šæœªç»“æŸï¼ŒåŒå¿—ä»éœ€åŠªåŠ›ï¼Œè¯¸å›å…±å‹‰ï¼ï¼ 2018.12.31èŽ«å¤ä¸œ]]></content>
      <categories>
        <category>summary</category>
      </categories>
      <tags>
        <tag>summary</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flaskçš„å¼‚æ­¥åŠå¤šçº¿ç¨‹]]></title>
    <url>%2Fz_post%2FFlask-skill%2F</url>
    <content type="text"><![CDATA[ä½œä¸ºè‘—åPython webæ¡†æž¶ä¹‹ä¸€çš„Flaskï¼Œå…·æœ‰ç®€å•è½»é‡ã€çµæ´»ã€æ‰©å±•ä¸°å¯Œä¸”ä¸Šæ‰‹éš¾åº¦ä½Žçš„ç‰¹ç‚¹ï¼Œå› æ­¤æˆä¸ºäº†æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ æ¨¡åž‹ä¸Šçº¿è·‘å®šæ—¶ä»»åŠ¡ï¼Œæä¾›APIçš„é¦–é€‰æ¡†æž¶ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼ŒFlaské»˜è®¤ä¸æ”¯æŒéžé˜»å¡žIOçš„ï¼Œå½“è¯·æ±‚Aè¿˜æœªå®Œæˆæ—¶å€™ï¼Œè¯·æ±‚Béœ€è¦ç­‰å¾…è¯·æ±‚Aå®ŒæˆåŽæ‰èƒ½è¢«å¤„ç†ï¼Œæ‰€ä»¥æ•ˆçŽ‡éžå¸¸ä½Žã€‚ä½†æ˜¯çº¿ä¸Šä»»åŠ¡é€šå¸¸éœ€è¦å¼‚æ­¥ã€é«˜å¹¶å‘ç­‰éœ€æ±‚ï¼Œæœ¬æ–‡æ€»ç»“ä¸€äº›åœ¨æ—¥å¸¸ä½¿ç”¨è¿‡ç¨‹ä¸­æ‰€å¸¸ç”¨çš„æŠ€å·§ã€‚ ä¸€ã€å‰æ²¿ å¼‚æ­¥å’Œå¤šçº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå…¶å®žï¼Œå¼‚æ­¥æ˜¯ç›®çš„ï¼Œè€Œå¤šçº¿ç¨‹æ˜¯å®žçŽ°è¿™ä¸ªç›®çš„çš„æ–¹æ³•ã€‚å¼‚æ­¥æ˜¯è¯´ï¼ŒAå‘èµ·ä¸€ä¸ªæ“ä½œåŽï¼ˆä¸€èˆ¬éƒ½æ˜¯æ¯”è¾ƒè€—æ—¶çš„æ“ä½œï¼Œå¦‚æžœä¸è€—æ—¶çš„æ“ä½œå°±æ²¡æœ‰å¿…è¦å¼‚æ­¥äº†ï¼‰ï¼Œå¯ä»¥ç»§ç»­è‡ªé¡¾è‡ªçš„å¤„ç†å®ƒè‡ªå·±çš„äº‹å„¿ï¼Œä¸ç”¨å¹²ç­‰ç€è¿™ä¸ªè€—æ—¶æ“ä½œè¿”å›žã€‚å®žçŽ°å¼‚æ­¥å¯ä»¥é‡‡ç”¨å¤šçº¿ç¨‹æŠ€æœ¯æˆ–åˆ™äº¤ç»™å¦å¤–çš„è¿›ç¨‹æ¥å¤„ç†,è¯¦è§£å¸¸è§è¿™é‡Œã€‚ äºŒã€å®žçŽ°æ–¹æ³• Flaskå¯åŠ¨è‡ªå¸¦æ–¹æ³• é‡‡ç”¨gunicornéƒ¨ç½² 1ã€Flaskä¸­è‡ªå¸¦æ–¹æ³•å®žçŽ° run.py #!/usr/bin/env python # -*- coding: utf-8 -*- # @Time : 2018-12-01 16:37 # @Author : mokundong from flask import Flask import socket from time import sleep myhost = socket.gethostbyname(socket.gethostname()) app = Flask(__name__) @app.route('/job1') def some_long_task1(): print("Task #1 started!") sleep(10) print("Task #1 is done!") @app.route('/job2') def some_long_task2(arg1, arg2): print("Task #2 started with args: %s %s!" % (arg1, arg2)) sleep(5) print("Task #2 is done!") if __name__ == '__main__': app.run(host=myhost,port=5000,threaded=True) app.run(host=xxx,port=xx,threaded=True)ä¸­threadedå¼€å¯åŽåˆ™ä¸éœ€è¦ç­‰é˜Ÿåˆ—ã€‚ 2ã€gunicornéƒ¨ç½² Gunicorn æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„Python WSGI Server,é€šå¸¸ç”¨å®ƒæ¥è¿è¡Œ wsgi application æˆ–è€… wsgi framework(å¦‚Django,Paster,Flask),åœ°ä½ç›¸å½“äºŽJavaä¸­çš„Tomcatã€‚gunicorn ä¼šå¯åŠ¨ä¸€ç»„ workerè¿›ç¨‹ï¼Œæ‰€æœ‰workerè¿›ç¨‹å…¬ç”¨ä¸€ç»„listenerï¼Œåœ¨æ¯ä¸ªworkerä¸­ä¸ºæ¯ä¸ªlistenerå»ºç«‹ä¸€ä¸ªwsgi serverã€‚æ¯å½“æœ‰HTTPé“¾æŽ¥åˆ°æ¥æ—¶ï¼Œwsgi serveråˆ›å»ºä¸€ä¸ªåç¨‹æ¥å¤„ç†è¯¥é“¾æŽ¥ï¼Œåç¨‹å¤„ç†è¯¥é“¾æŽ¥çš„æ—¶å€™ï¼Œå…ˆåˆå§‹åŒ–WSGIçŽ¯å¢ƒï¼Œç„¶åŽè°ƒç”¨ç”¨æˆ·æä¾›çš„appå¯¹è±¡åŽ»å¤„ç†HTTPè¯·æ±‚ã€‚å…³äºŽgunicornçš„è¯¦ç»†è¯´æ˜Žï¼Œå¯ä»¥å‚è€ƒè¿™é‡Œã€‚ ä½¿ç”¨å‘½ä»¤è¡Œå¯åŠ¨gunicornæœ‰ä¸¤ç§æ–¹å¼èŽ·å–é…ç½®é¡¹ï¼Œä¸€ç§æ˜¯åœ¨å‘½ä»¤è¡Œé…ç½®ï¼Œä¸€ç§æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­èŽ·å–ã€‚ run.py #!/usr/bin/env python # -*- coding: utf-8 -*- # @Time : 2018-12-01 17:00 # @Author : mokundong from flask import Flask from time import sleep app = Flask(__name__) @app.route('/job1') def some_long_task1(): print("Task #1 started!") sleep(10) print("Task #1 is done!") @app.route('/job2') def some_long_task2(arg1, arg2): print("Task #2 started with args: %s %s!" % (arg1, arg2)) sleep(5) print("Task #2 is done!") if __name__ == '__main__': app.run() å‘½ä»¤è¡Œé…ç½®gunicorn --workers=4 --bind=127.0.0.1:8000 run:app æ›´å¤šé…ç½®è§å®˜ç½‘ é…ç½®æ–‡ä»¶èŽ·å–é…ç½® gunicorn_config.py #!/usr/bin/env python # -*- coding: utf-8 -*- # @Time : 2018-12-01 17:10 # @Author : mokundong import os import socket import multiprocessing import gevent.monkey gevent.monkey.patch_all() myhost = socket.gethostbyname(socket.gethostname()) debug = False loglevel = 'info' hosts = get_host_ip() bind = hosts+":5000" timeout = 30 #è¶…æ—¶ pidfile = "log/gunicorn.pid" accesslog = "log/access.log" errorlog = "log/debug.log" daemon = True #æ„å‘³ç€å¼€å¯åŽå°è¿è¡Œï¼Œé»˜è®¤ä¸ºFalse workers = 4 # å¯åŠ¨çš„è¿›ç¨‹æ•° threads = 2 #æŒ‡å®šæ¯ä¸ªè¿›ç¨‹å¼€å¯çš„çº¿ç¨‹æ•° worker_class = 'gevent' #é»˜è®¤ä¸ºsyncæ¨¡å¼ï¼Œä¹Ÿå¯ä½¿ç”¨geventæ¨¡å¼ã€‚ x_forwarded_for_header = 'X-FORWARDED-FOR' å¯åŠ¨å‘½ä»¤å¦‚ä¸‹ gunicorn -c gunicorn_config.py run:app ä¸‰ã€è¡¥å……1ã€å…³äºŽçº¿ç¨‹çš„è¡¥å…… åœ¨å·¥ä½œä¸­æˆ‘è¿˜é‡åˆ°ä¸€ç§æƒ…å†µï¼Œå½“ä¸€ä¸ªè¯·æ±‚è¿‡æ¥åŽï¼Œæˆ‘éœ€è¦ä¸¤ç§å›žåº”ï¼Œä¸€ä¸ªæ˜¯åŠæ—¶è¿”å›žappè¿è¡Œç»“æžœï¼Œç¬¬äºŒä¸ªå“åº”æ˜¯ä¿å­˜æ•°æ®åˆ°æ—¥å¿—æˆ–è€…æ•°æ®åº“ã€‚å¾€å¾€æˆ‘ä»¬åœ¨å†™æ•°æ®çš„è¿‡ç¨‹ä¸­ä¼šèŠ±é”€ä¸€å®šçš„æ—¶é—´ï¼Œå¯¼è‡´ç»“æžœè¿”å›žä¼šæœ‰æ‰€å»¶è¿Ÿï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ç”¨ä¸¤ä¸ªçº¿ç¨‹å¤„ç†è¿™ä¸¤ä¸ªä»»åŠ¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä¸‹å¤„ç†ã€‚ run.py #!/usr/bin/env python # -*- coding: utf-8 -*- # @Time : 2018-12-01 17:20 # @Author : mokundong from flask import Flask,request from time import sleep from concurrent.futures import ThreadPoolExecutor executor = ThreadPoolExecutor(2) app = Flask(__name__) @app.route('/job') def run_jobs(): executor.submit(some_long_task1) executor.submit(some_long_task2, 'hello', 123) return 'Two jobs was launched in background!' def some_long_task1(): print("Task #1 started!") sleep(10) print("Task #1 is done!") def some_long_task2(arg1, arg2): print("Task #2 started with args: %s %s!" % (arg1, arg2)) sleep(5) print("Task #2 is done!") if __name__ == '__main__': app.run() 2ã€å…³äºŽèŽ·å–IPçš„è¡¥å…… ä¸Šè¿°ä»£ç ä¸­é€šè¿‡èŽ·å–hostnameï¼Œç„¶åŽå†é€šè¿‡hostnameåæŸ¥å¤„æœºå™¨çš„IPã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ä¸æŽ¨èçš„ã€‚å› ä¸ºå¾ˆå¤šçš„æœºå™¨æ²¡æœ‰è§„èŒƒè¿™ä¸ªhostnameçš„è®¾ç½®ã€‚å¦å¤–å°±æ˜¯æœ‰äº›æœåŠ¡å™¨ä¼šåœ¨ /etc/hosts ä¸­æ·»åŠ æœ¬æœºçš„hostnameçš„åœ°å€ï¼Œè¿™ä¸ªåšæ³•ä¹Ÿä¸æ˜¯ä¸å¯ä»¥ï¼Œä½†æ˜¯å¦‚æžœè®¾ç½®æˆäº† 127.0.0.1ï¼Œé‚£ä¹ˆèŽ·å–å‡ºæ¥çš„IPå°±éƒ½æ˜¯è¿™ä¸ªåœ°å€äº†ã€‚è¿™é‡Œç»™å‡ºä¸€ç§ä¼˜é›…çš„æ–¹å¼èŽ·å–IPï¼Œåˆ©ç”¨ UDP åè®®æ¥å®žçŽ°çš„ï¼Œç”Ÿæˆä¸€ä¸ªUDPåŒ…ï¼ŒæŠŠè‡ªå·±çš„ IP æ”¾å¦‚åˆ° UDP åè®®å¤´ä¸­ï¼Œç„¶åŽä»ŽUDPåŒ…ä¸­èŽ·å–æœ¬æœºçš„IPã€‚ #!/usr/bin/env python # -*- coding: utf-8 -*- # @Time : 2018-12-01 17:30 # @Author : mokundong # å¯ä»¥å°è£…æˆå‡½æ•°ï¼Œæ–¹ä¾¿ Python çš„ç¨‹åºè°ƒç”¨ import socket def get_host_ip(): try: s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) s.connect(('8.8.8.8', 80)) ip = s.getsockname()[0] finally: s.close() return ip æ€»ç»“å½“ç„¶æŽ¨èä½¿ç”¨gunicornéƒ¨ç½²å¤šçº¿ç¨‹ï¼ŒFlaskè‡ªå¸¦çš„ï¼Œemmmmï¼Œæµ‹è¯•çŽ©å„¿çŽ©å„¿å§ã€‚åœ¨å†™ä½œè¿‡ç¨‹ä¸­æ‰å‘çŽ°è‡ªå·±çŸ¥è¯†æ¼æ´žä¸æ˜¯ä¸€èˆ¬å¤šï¼Œå…±å‹‰ï¼]]></content>
      <categories>
        <category>skill</category>
      </categories>
      <tags>
        <tag>Flask</tag>
        <tag>Python</tag>
      </tags>
  </entry>
</search>
